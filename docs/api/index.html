<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>jmni-server 文档</title>
  <link rel="stylesheet" href="https://unpkg.com/swagger-ui-dist@5/swagger-ui.css">
  <style>
    body {
      margin: 0;
      padding: 0;
    }
    .swagger-ui .topbar {
      display: none;
    }
    .swagger-ui .info {
      margin: 20px 0;
    }
    .swagger-ui .info .title {
      font-size: 2em;
    }
    /* 自定义主题 */
    .swagger-ui .opblock.opblock-post {
      border-color: #49cc90;
      background: rgba(73, 204, 144, 0.1);
    }
    .swagger-ui .opblock.opblock-get {
      border-color: #61affe;
      background: rgba(97, 175, 254, 0.1);
    }
    .swagger-ui .opblock.opblock-delete {
      border-color: #f93e3e;
      background: rgba(249, 62, 62, 0.1);
    }
    .swagger-ui .opblock.opblock-put {
      border-color: #fca130;
      background: rgba(252, 161, 48, 0.1);
    }
    /* 生成信息 */
    .generated-info {
      text-align: center;
      padding: 10px;
      background: #f5f5f5;
      color: #666;
      font-size: 12px;
    }
  </style>
</head>
<body>
  <div id="swagger-ui"></div>
  <div class="generated-info">
    本文档由 JMNI Server 自动生成 | 
    生成时间: 2025/12/5 11:11:45
  </div>
  <script src="https://unpkg.com/swagger-ui-dist@5/swagger-ui-bundle.js"></script>
  <script src="https://unpkg.com/swagger-ui-dist@5/swagger-ui-standalone-preset.js"></script>
  <script>
    window.onload = function() {
      const spec = {"openapi":"3.0.0","paths":{"/admin/security/metrics":{"get":{"description":"查询指定IP在时间窗口内的安全事件统计，包括失败登录、签名失败、限流触发等","operationId":"SecurityController_getSecurityMetrics","parameters":[{"name":"ip","required":false,"in":"query","description":"要查询的IP地址","schema":{"example":"192.168.1.100","type":"string"}},{"name":"windowMinutes","required":false,"in":"query","description":"查询时间窗口（分钟），默认60分钟","schema":{"minimum":1,"maximum":1440,"example":60,"type":"number"}}],"responses":{"200":{"description":"安全指标获取成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SecurityMetricsResponse"}}}},"401":{"description":"未授权"},"403":{"description":"权限不足"},"429":{"description":"请求过于频繁"}},"security":[{"bearer":[]}],"summary":"获取安全指标","tags":["Security - 安全管理"]}},"/admin/security/blacklist":{"get":{"description":"获取当前所有有效的IP黑名单条目列表","operationId":"SecurityController_getBlacklist","parameters":[],"responses":{"200":{"description":"黑名单获取成功","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/BlacklistEntryResponse"}}}}},"401":{"description":"未授权"},"403":{"description":"权限不足"}},"security":[{"bearer":[]}],"summary":"获取IP黑名单","tags":["Security - 安全管理"]},"post":{"description":"手动将指定IP添加到黑名单，可设置过期时间","operationId":"SecurityController_addToBlacklist","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddToBlacklistDto"}}}},"responses":{"201":{"description":"IP添加成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessResponse"}}}},"400":{"description":"请求参数错误"},"401":{"description":"未授权"},"403":{"description":"权限不足"}},"security":[{"bearer":[]}],"summary":"添加IP到黑名单","tags":["Security - 安全管理"]}},"/admin/security/blacklist/{ip}/remove":{"post":{"description":"将指定IP从黑名单中移除，恢复其访问权限","operationId":"SecurityController_removeFromBlacklist","parameters":[{"name":"ip","required":true,"in":"path","description":"要移除的IP地址","schema":{"example":"192.168.1.100","type":"string"}}],"responses":{"200":{"description":"IP移除成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessResponse"}}}},"401":{"description":"未授权"},"403":{"description":"权限不足"}},"security":[{"bearer":[]}],"summary":"从黑名单移除IP","tags":["Security - 安全管理"]}},"/admin/security/blacklist/auto/{ip}":{"post":{"description":"根据安全策略自动封禁可疑IP，设置有限期的封禁时长","operationId":"SecurityController_autoBlacklistIp","parameters":[{"name":"ip","required":true,"in":"path","description":"要封禁的IP地址","schema":{"example":"192.168.1.100","type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AutoBlacklistDto"}}}},"responses":{"201":{"description":"IP自动封禁成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessResponse"}}}},"400":{"description":"请求参数错误"},"401":{"description":"未授权"},"403":{"description":"权限不足"}},"security":[{"bearer":[]}],"summary":"自动封禁可疑IP","tags":["Security - 安全管理"]}},"/admin/security/cleanup":{"post":{"description":"清理过期的黑名单条目和安全事件记录，释放存储空间","operationId":"SecurityController_cleanup","parameters":[],"responses":{"200":{"description":"清理完成","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CleanupResponse"}}}},"401":{"description":"未授权"},"403":{"description":"权限不足"},"429":{"description":"请求过于频繁"}},"security":[{"bearer":[]}],"summary":"清理过期的安全数据","tags":["Security - 安全管理"]}},"/admin/security/suspicious/{ip}":{"get":{"description":"检查指定IP在时间窗口内是否存在可疑活动","operationId":"SecurityController_checkSuspiciousIp","parameters":[{"name":"ip","required":true,"in":"path","description":"要检查的IP地址","schema":{"example":"192.168.1.100","type":"string"}},{"name":"windowMinutes","required":true,"in":"query","schema":{"type":"number"}}],"responses":{"200":{"description":"检查完成","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuspiciousCheckResponse"}}}},"401":{"description":"未授权"},"403":{"description":"权限不足"}},"security":[{"bearer":[]}],"summary":"检查IP是否可疑","tags":["Security - 安全管理"]}},"/admin/security/overview":{"get":{"description":"获取系统整体安全状况的概览信息","operationId":"SecurityController_getSecurityOverview","parameters":[],"responses":{"200":{"description":"概览获取成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SecurityOverviewResponse"}}}},"401":{"description":"未授权"},"403":{"description":"权限不足"}},"security":[{"bearer":[]}],"summary":"获取安全概览","tags":["Security - 安全管理"]}},"/admin/database/stats":{"get":{"description":"获取指定时间窗口内的数据库查询统计信息","operationId":"DatabaseMonitorController_getQueryStats","parameters":[{"name":"windowMinutes","required":false,"in":"query","description":"查询时间窗口（分钟），默认60分钟","schema":{"minimum":1,"maximum":1440,"example":60,"type":"number"}}],"responses":{"200":{"description":"统计信息获取成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/QueryStatsResponse"}}}},"401":{"description":"未授权"},"403":{"description":"权限不足"},"429":{"description":"请求过于频繁"}},"security":[{"bearer":[]}],"summary":"获取数据库查询统计","tags":["Database Monitor - 数据库监控"]}},"/admin/database/slow-queries":{"get":{"description":"获取执行时间最长的查询列表，用于性能优化分析","operationId":"DatabaseMonitorController_getSlowestQueries","parameters":[{"name":"limit","required":false,"in":"query","description":"返回记录数量限制，默认10条","schema":{"minimum":1,"maximum":100,"example":10,"type":"number"}}],"responses":{"200":{"description":"慢查询列表获取成功","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/SlowQueryRecordResponse"}}}}},"401":{"description":"未授权"},"403":{"description":"权限不足"}},"security":[{"bearer":[]}],"summary":"获取最慢的查询","tags":["Database Monitor - 数据库监控"]}},"/admin/database/cache/stats":{"get":{"description":"获取查询缓存的统计信息，包括键数量、内存使用等","operationId":"DatabaseMonitorController_getCacheStats","parameters":[],"responses":{"200":{"description":"缓存统计获取成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CacheStatsResponse"}}}},"401":{"description":"未授权"},"403":{"description":"权限不足"}},"security":[{"bearer":[]}],"summary":"获取缓存统计信息","tags":["Database Monitor - 数据库监控"]}},"/admin/database/cache/clear":{"post":{"description":"清理所有查询缓存，用于缓存失效或数据刷新场景","operationId":"DatabaseMonitorController_clearCache","parameters":[],"responses":{"200":{"description":"缓存清理成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CacheClearResponse"}}}},"401":{"description":"未授权"},"403":{"description":"权限不足"},"429":{"description":"请求过于频繁"}},"security":[{"bearer":[]}],"summary":"清理查询缓存","tags":["Database Monitor - 数据库监控"]}},"/admin/database/slow-queries/cleanup":{"post":{"description":"清理指定天数之前的慢查询记录，释放存储空间","operationId":"DatabaseMonitorController_cleanupSlowQueries","parameters":[{"name":"days","required":false,"in":"query","description":"清理多少天前的记录，默认7天","schema":{"minimum":1,"maximum":365,"example":7,"type":"number"}}],"responses":{"200":{"description":"清理完成","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SlowQueryCleanupResponse"}}}},"401":{"description":"未授权"},"403":{"description":"权限不足"},"429":{"description":"请求过于频繁"}},"security":[{"bearer":[]}],"summary":"清理过期的慢查询记录","tags":["Database Monitor - 数据库监控"]}},"/admin/database/stats/reset":{"post":{"description":"重置所有查询统计数据，从头开始计算","operationId":"DatabaseMonitorController_resetStats","parameters":[],"responses":{"200":{"description":"统计重置成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StatsResetResponse"}}}},"401":{"description":"未授权"},"403":{"description":"权限不足"},"429":{"description":"请求过于频繁"}},"security":[{"bearer":[]}],"summary":"重置查询统计","tags":["Database Monitor - 数据库监控"]}},"/admin/database/overview":{"get":{"description":"获取数据库监控的综合概览信息，包括查询统计、缓存状态等","operationId":"DatabaseMonitorController_getOverview","parameters":[],"responses":{"200":{"description":"概览获取成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DatabaseOverviewResponse"}}}},"401":{"description":"未授权"},"403":{"description":"权限不足"}},"security":[{"bearer":[]}],"summary":"获取数据库监控概览","tags":["Database Monitor - 数据库监控"]}},"/security/ephemeral-credential":{"post":{"operationId":"SecurityController_issueEphemeral","parameters":[],"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"签发短期 HMAC 临时密钥","tags":["security"]}},"/admin/monitoring/system/metrics":{"get":{"description":"获取当前系统的CPU、内存、磁盘、网络等指标","operationId":"MonitoringController_getSystemMetrics","parameters":[],"responses":{"200":{"description":"系统指标获取成功"},"401":{"description":"未授权"},"403":{"description":"权限不足"}},"security":[{"bearer":[]}],"summary":"获取系统指标","tags":["Monitoring - 系统监控"]}},"/admin/monitoring/application/metrics":{"get":{"description":"获取应用的请求统计、用户统计、数据库统计等指标","operationId":"MonitoringController_getApplicationMetrics","parameters":[],"responses":{"200":{"description":"应用指标获取成功"},"401":{"description":"未授权"},"403":{"description":"权限不足"}},"security":[{"bearer":[]}],"summary":"获取应用指标","tags":["Monitoring - 系统监控"]}},"/admin/monitoring/health":{"get":{"description":"检查系统各服务组件的健康状态","operationId":"MonitoringController_performHealthCheck","parameters":[],"responses":{"200":{"description":"健康检查完成"},"401":{"description":"未授权"},"403":{"description":"权限不足"}},"security":[{"bearer":[]}],"summary":"执行健康检查","tags":["Monitoring - 系统监控"]}},"/admin/monitoring/system/history":{"get":{"description":"获取指定时间范围内的系统历史指标数据","operationId":"MonitoringController_getSystemHistory","parameters":[{"name":"hours","required":false,"in":"query","description":"查询小时数，默认24小时","schema":{"minimum":1,"maximum":168,"example":24,"type":"number"}}],"responses":{"200":{"description":"历史指标获取成功"},"401":{"description":"未授权"},"403":{"description":"权限不足"}},"security":[{"bearer":[]}],"summary":"获取系统历史指标","tags":["Monitoring - 系统监控"]}},"/admin/monitoring/application/history":{"get":{"description":"获取指定时间范围内的应用历史指标数据","operationId":"MonitoringController_getApplicationHistory","parameters":[{"name":"hours","required":false,"in":"query","description":"查询小时数，默认24小时","schema":{"minimum":1,"maximum":168,"example":24,"type":"number"}}],"responses":{"200":{"description":"历史指标获取成功"},"401":{"description":"未授权"},"403":{"description":"权限不足"}},"security":[{"bearer":[]}],"summary":"获取应用历史指标","tags":["Monitoring - 系统监控"]}},"/admin/monitoring/business/metrics":{"get":{"description":"获取用户、认证、安全等业务指标","operationId":"MonitoringController_getBusinessMetrics","parameters":[],"responses":{"200":{"description":"业务指标获取成功"},"401":{"description":"未授权"},"403":{"description":"权限不足"}},"security":[{"bearer":[]}],"summary":"获取业务指标","tags":["Monitoring - 系统监控"]}},"/admin/monitoring/business/dashboard":{"get":{"description":"获取用于仪表板展示的综合数据","operationId":"MonitoringController_getDashboardData","parameters":[],"responses":{"200":{"description":"仪表板数据获取成功"},"401":{"description":"未授权"},"403":{"description":"权限不足"}},"security":[{"bearer":[]}],"summary":"获取仪表板数据","tags":["Monitoring - 系统监控"]}},"/admin/monitoring/business/trends/{metric}":{"get":{"description":"获取指定指标的历史趋势数据","operationId":"MonitoringController_getMetricTrends","parameters":[{"name":"metric","required":true,"in":"path","description":"指标名称","schema":{"example":"auth","type":"string"}},{"name":"days","required":false,"in":"query","description":"查询天数，默认7天","schema":{"minimum":1,"maximum":30,"example":7,"type":"number"}}],"responses":{"200":{"description":"指标趋势获取成功"},"401":{"description":"未授权"},"403":{"description":"权限不足"}},"security":[{"bearer":[]}],"summary":"获取指标趋势","tags":["Monitoring - 系统监控"]}},"/admin/monitoring/alerts/rules":{"post":{"description":"创建新的告警规则，用于监控指标并触发告警","operationId":"MonitoringController_createAlertRule","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateAlertRuleDto"}}}},"responses":{"201":{"description":"告警规则创建成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RuleCreateResponse"}}}},"400":{"description":"请求参数错误"},"401":{"description":"未授权"},"403":{"description":"权限不足"}},"security":[{"bearer":[]}],"summary":"创建告警规则","tags":["Monitoring - 系统监控"]},"get":{"description":"获取当前所有告警规则列表","operationId":"MonitoringController_getAllAlertRules","parameters":[],"responses":{"200":{"description":"告警规则获取成功"},"401":{"description":"未授权"},"403":{"description":"权限不足"}},"security":[{"bearer":[]}],"summary":"获取所有告警规则","tags":["Monitoring - 系统监控"]}},"/admin/monitoring/alerts/rules/{ruleId}":{"get":{"description":"根据规则ID获取告警规则详情","operationId":"MonitoringController_getAlertRule","parameters":[{"name":"ruleId","required":true,"in":"path","description":"规则ID","schema":{"example":"rule_1704067200000_abc123","type":"string"}}],"responses":{"200":{"description":"告警规则获取成功"},"401":{"description":"未授权"},"403":{"description":"权限不足"},"404":{"description":"规则不存在"}},"security":[{"bearer":[]}],"summary":"获取告警规则","tags":["Monitoring - 系统监控"]}},"/admin/monitoring/alerts/rules/{ruleId}/update":{"post":{"description":"更新指定告警规则的配置","operationId":"MonitoringController_updateAlertRule","parameters":[{"name":"ruleId","required":true,"in":"path","description":"规则ID","schema":{"example":"rule_1704067200000_abc123","type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateAlertRuleDto"}}}},"responses":{"200":{"description":"告警规则更新成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessResponse"}}}},"400":{"description":"请求参数错误"},"401":{"description":"未授权"},"403":{"description":"权限不足"},"404":{"description":"规则不存在"}},"security":[{"bearer":[]}],"summary":"更新告警规则","tags":["Monitoring - 系统监控"]}},"/admin/monitoring/alerts/rules/{ruleId}/delete":{"post":{"description":"删除指定的告警规则","operationId":"MonitoringController_deleteAlertRule","parameters":[{"name":"ruleId","required":true,"in":"path","description":"规则ID","schema":{"example":"rule_1704067200000_abc123","type":"string"}}],"responses":{"200":{"description":"告警规则删除成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessResponse"}}}},"401":{"description":"未授权"},"403":{"description":"权限不足"},"404":{"description":"规则不存在"}},"security":[{"bearer":[]}],"summary":"删除告警规则","tags":["Monitoring - 系统监控"]}},"/admin/monitoring/alerts/active":{"get":{"description":"获取当前所有未解决的活跃告警","operationId":"MonitoringController_getActiveAlerts","parameters":[],"responses":{"200":{"description":"活跃告警获取成功"},"401":{"description":"未授权"},"403":{"description":"权限不足"}},"security":[{"bearer":[]}],"summary":"获取活跃告警","tags":["Monitoring - 系统监控"]}},"/admin/monitoring/alerts/history":{"get":{"description":"获取告警历史记录","operationId":"MonitoringController_getAlertHistory","parameters":[{"name":"limit","required":false,"in":"query","description":"返回记录数量限制，默认100条","schema":{"minimum":1,"maximum":1000,"example":100,"type":"number"}}],"responses":{"200":{"description":"告警历史获取成功"},"401":{"description":"未授权"},"403":{"description":"权限不足"}},"security":[{"bearer":[]}],"summary":"获取告警历史","tags":["Monitoring - 系统监控"]}},"/admin/monitoring/alerts/{alertId}/resolve":{"post":{"description":"标记告警已解决并记录解决方案","operationId":"MonitoringController_resolveAlert","parameters":[{"name":"alertId","required":true,"in":"path","description":"告警ID","schema":{"example":"alert_1704067200000_xyz789","type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResolveAlertDto"}}}},"responses":{"200":{"description":"告警解决成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessResponse"}}}},"400":{"description":"请求参数错误"},"401":{"description":"未授权"},"403":{"description":"权限不足"},"404":{"description":"告警不存在"}},"security":[{"bearer":[]}],"summary":"解决告警","tags":["Monitoring - 系统监控"]}},"/admin/monitoring/notifications/config":{"get":{"description":"获取当前的通知渠道配置","operationId":"MonitoringController_getNotificationConfig","parameters":[],"responses":{"200":{"description":"通知配置获取成功"},"401":{"description":"未授权"},"403":{"description":"权限不足"}},"security":[{"bearer":[]}],"summary":"获取通知配置","tags":["Monitoring - 系统监控"]},"post":{"description":"设置通知渠道的配置参数","operationId":"MonitoringController_setNotificationConfig","parameters":[],"responses":{"200":{"description":"通知配置设置成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessResponse"}}}},"400":{"description":"请求参数错误"},"401":{"description":"未授权"},"403":{"description":"权限不足"}},"security":[{"bearer":[]}],"summary":"设置通知配置","tags":["Monitoring - 系统监控"]}},"/admin/monitoring/notifications/queue/stats":{"get":{"description":"获取 BullMQ 通知队列的统计信息","operationId":"MonitoringController_getNotificationQueueStats","parameters":[],"responses":{"200":{"description":"队列统计获取成功"},"401":{"description":"未授权"},"403":{"description":"权限不足"}},"security":[{"bearer":[]}],"summary":"获取通知队列统计","tags":["Monitoring - 系统监控"]}},"/admin/monitoring/notifications/failed":{"get":{"description":"获取发送失败的通知列表","operationId":"MonitoringController_getFailedNotifications","parameters":[{"name":"limit","required":false,"in":"query","description":"返回记录数量限制，默认100条","schema":{"minimum":1,"maximum":1000,"example":100,"type":"number"}}],"responses":{"200":{"description":"失败通知获取成功"},"401":{"description":"未授权"},"403":{"description":"权限不足"}},"security":[{"bearer":[]}],"summary":"获取失败的通知","tags":["Monitoring - 系统监控"]}},"/admin/monitoring/notifications/failed/{jobId}/retry":{"post":{"description":"重新发送指定的失败通知","operationId":"MonitoringController_retryFailedNotification","parameters":[{"name":"jobId","required":true,"in":"path","description":"任务ID","schema":{"example":"job_123","type":"string"}}],"responses":{"200":{"description":"重试成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessResponse"}}}},"401":{"description":"未授权"},"403":{"description":"权限不足"}},"security":[{"bearer":[]}],"summary":"重试失败的通知","tags":["Monitoring - 系统监控"]}},"/admin/monitoring/notifications/failed/retry-all":{"post":{"description":"重新发送所有失败的通知","operationId":"MonitoringController_retryAllFailedNotifications","parameters":[],"responses":{"200":{"description":"重试成功"},"401":{"description":"未授权"},"403":{"description":"权限不足"}},"security":[{"bearer":[]}],"summary":"重试所有失败的通知","tags":["Monitoring - 系统监控"]}},"/admin/monitoring/metrics/check":{"post":{"description":"手动触发指标检查，用于测试告警规则","operationId":"MonitoringController_checkMetrics","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CheckMetricsDto"}}}},"responses":{"200":{"description":"指标检查完成","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessResponse"}}}},"400":{"description":"请求参数错误"},"401":{"description":"未授权"},"403":{"description":"权限不足"}},"security":[{"bearer":[]}],"summary":"手动检查指标","tags":["Monitoring - 系统监控"]}},"/admin/monitoring/overview":{"get":{"description":"获取系统监控的综合概览信息","operationId":"MonitoringController_getMonitoringOverview","parameters":[],"responses":{"200":{"description":"监控概览获取成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MonitoringOverviewResponse"}}}},"401":{"description":"未授权"},"403":{"description":"权限不足"}},"security":[{"bearer":[]}],"summary":"获取监控概览","tags":["Monitoring - 系统监控"]}},"/auth/email/send":{"post":{"operationId":"AuthController_sendEmailCode","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SendEmailCodeDto"}}}},"responses":{"201":{"description":""}},"summary":"发送邮箱验证码（注册/登录/重置）","tags":["auth"]}},"/auth/login":{"post":{"operationId":"AuthController_login","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginDto"}}}},"responses":{"201":{"description":""}},"summary":"用户登录（颁发 Access/Refresh，落会话）","tags":["auth"]}},"/auth/register":{"post":{"operationId":"AuthController_register","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserDto"}}}},"responses":{"201":{"description":""}},"summary":"用户注册（可含邮箱验证码校验）并自动登录","tags":["auth"]}},"/auth/refresh":{"post":{"operationId":"AuthController_refresh","parameters":[],"responses":{"201":{"description":""}},"summary":"刷新 Access（轮换 RefreshToken）","tags":["auth"]}},"/auth/security/mfa/setup":{"post":{"operationId":"AuthSecurityController_setupMFA","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MFASetupDto"}}}},"responses":{"200":{"description":"MFA设置生成成功"}},"security":[{"bearer":[]}],"summary":"设置MFA","tags":["Auth Security"]}},"/auth/security/mfa/verify":{"post":{"operationId":"AuthSecurityController_verifyMFA","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MFAVerifyDto"}}}},"responses":{"200":{"description":"MFA验证成功"}},"security":[{"bearer":[]}],"summary":"验证MFA代码并启用","tags":["Auth Security"]}},"/auth/security/mfa/disable":{"post":{"operationId":"AuthSecurityController_disableMFA","parameters":[],"responses":{"200":{"description":"MFA禁用成功"}},"security":[{"bearer":[]}],"summary":"禁用MFA","tags":["Auth Security"]}},"/auth/security/mfa/status":{"get":{"operationId":"AuthSecurityController_getMFAStatus","parameters":[],"responses":{"200":{"description":"MFA状态获取成功"}},"security":[{"bearer":[]}],"summary":"获取MFA状态","tags":["Auth Security"]}},"/auth/security/mfa/backup-codes/regenerate":{"post":{"operationId":"AuthSecurityController_regenerateBackupCodes","parameters":[],"responses":{"200":{"description":"备用代码重新生成成功"}},"security":[{"bearer":[]}],"summary":"重新生成备用代码","tags":["Auth Security"]}},"/auth/security/devices":{"get":{"operationId":"AuthSecurityController_getUserDevices","parameters":[],"responses":{"200":{"description":"设备列表获取成功"}},"security":[{"bearer":[]}],"summary":"获取用户设备列表","tags":["Auth Security"]}},"/auth/security/devices/{deviceId}/trust":{"post":{"operationId":"AuthSecurityController_trustDevice","parameters":[{"name":"deviceId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"设备信任成功"}},"security":[{"bearer":[]}],"summary":"信任设备","tags":["Auth Security"]}},"/auth/security/devices/{deviceId}/untrust":{"post":{"operationId":"AuthSecurityController_untrustDevice","parameters":[{"name":"deviceId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"设备取消信任成功"}},"security":[{"bearer":[]}],"summary":"取消信任设备","tags":["Auth Security"]}},"/auth/security/devices/{deviceId}/delete":{"post":{"operationId":"AuthSecurityController_deleteDevice","parameters":[{"name":"deviceId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"设备删除成功"}},"security":[{"bearer":[]}],"summary":"删除设备","tags":["Auth Security"]}},"/auth/security/devices/trust-settings":{"get":{"operationId":"AuthSecurityController_getTrustSettings","parameters":[],"responses":{"200":{"description":"设备信任设置获取成功"}},"security":[{"bearer":[]}],"summary":"获取设备信任设置","tags":["Auth Security"]},"post":{"operationId":"AuthSecurityController_setTrustSettings","parameters":[],"responses":{"200":{"description":"设备信任设置更新成功"}},"security":[{"bearer":[]}],"summary":"设置设备信任设置","tags":["Auth Security"]}},"/auth/security/login-history":{"get":{"operationId":"AuthSecurityController_getLoginHistory","parameters":[{"name":"limit","required":true,"in":"query","schema":{"type":"number"}}],"responses":{"200":{"description":"登录历史获取成功"}},"security":[{"bearer":[]}],"summary":"获取登录历史","tags":["Auth Security"]}},"/auth/security/password/check":{"post":{"operationId":"AuthSecurityController_checkPassword","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PasswordCheckDto"}}}},"responses":{"200":{"description":"密码强度检查完成"}},"security":[{"bearer":[]}],"summary":"检查密码强度","tags":["Auth Security"]}},"/auth/security/password/policy":{"get":{"operationId":"AuthSecurityController_getPasswordPolicy","parameters":[],"responses":{"200":{"description":"密码策略获取成功"}},"security":[{"bearer":[]}],"summary":"获取密码策略","tags":["Auth Security"]}},"/auth/security/password/generate":{"post":{"operationId":"AuthSecurityController_generatePassword","parameters":[{"name":"length","required":true,"in":"query","schema":{"type":"number"}}],"responses":{"200":{"description":"安全密码生成成功"}},"security":[{"bearer":[]}],"summary":"生成安全密码","tags":["Auth Security"]}},"/auth/security/alerts":{"get":{"operationId":"AuthSecurityController_getSecurityAlerts","parameters":[{"name":"limit","required":true,"in":"query","schema":{"type":"number"}},{"name":"includeResolved","required":true,"in":"query","schema":{"type":"boolean"}}],"responses":{"200":{"description":"安全告警获取成功"}},"security":[{"bearer":[]}],"summary":"获取安全告警","tags":["Auth Security"]}},"/auth/security/alerts/{alertId}/read":{"post":{"operationId":"AuthSecurityController_markAlertAsRead","parameters":[{"name":"alertId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"告警标记为已读成功"}},"security":[{"bearer":[]}],"summary":"标记告警为已读","tags":["Auth Security"]}},"/auth/security/alerts/{alertId}/resolve":{"post":{"operationId":"AuthSecurityController_resolveAlert","parameters":[{"name":"alertId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"告警解决成功"}},"security":[{"bearer":[]}],"summary":"解决告警","tags":["Auth Security"]}},"/auth/security/alerts/settings":{"get":{"operationId":"AuthSecurityController_getAlertSettings","parameters":[],"responses":{"200":{"description":"告警设置获取成功"}},"security":[{"bearer":[]}],"summary":"获取告警设置","tags":["Auth Security"]},"post":{"operationId":"AuthSecurityController_setAlertSettings","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AlertSettingsDto"}}}},"responses":{"200":{"description":"告警设置更新成功"}},"security":[{"bearer":[]}],"summary":"设置告警设置","tags":["Auth Security"]}},"/auth/security/stats":{"get":{"operationId":"AuthSecurityController_getSecurityStats","parameters":[],"responses":{"200":{"description":"安全统计信息获取成功"}},"security":[{"bearer":[]}],"summary":"获取安全统计信息","tags":["Auth Security"]}},"/users/me":{"get":{"operationId":"UsersController_me","parameters":[],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"获取我的信息","tags":["users"]}},"/users/me/update":{"post":{"operationId":"UsersController_updateMe","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateUserDto"}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"更新我的资料（POST 语义：执行一次更新动作）","tags":["users"]}},"/users/me/password":{"post":{"operationId":"UsersController_changePassword","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangePasswordDto"}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"修改密码（旧密码校验 + pv 自增）","tags":["users"]}},"/auth/oauth/{provider}/authorize":{"get":{"operationId":"OAuthController_authorize","parameters":[{"name":"provider","required":true,"in":"path","schema":{"type":"string"}},{"name":"state","required":true,"in":"query","schema":{"type":"string"}},{"name":"code_verifier","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"summary":"生成第三方授权 URL（带 state/PKCE）","tags":["auth/oauth"]}},"/auth/oauth/{provider}/callback":{"get":{"operationId":"OAuthController_callback","parameters":[{"name":"provider","required":true,"in":"path","schema":{"type":"string"}},{"name":"code","required":true,"in":"query","schema":{"type":"string"}},{"name":"state","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"summary":"第三方回调，用 code 换 token+资料 -\u003e 登录/注册","tags":["auth/oauth"]}},"/auth/oauth/wechat-mp/login":{"post":{"operationId":"OAuthController_wechatMpLogin","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WechatMpLoginDto"}}}},"responses":{"201":{"description":""}},"summary":"微信小程序登录（code -\u003e openid/unionid）","tags":["auth/oauth"]}},"/upload/image":{"post":{"description":"上传单张图片，支持 jpg/png/gif/webp 格式，最大5MB。字段名必须为 file。","operationId":"UploadController_uploadImage","parameters":[{"name":"category","required":false,"in":"query","description":"图片分类：avatar（头像）, other（其他）","schema":{"example":"avatar","type":"string"}}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"file":{"type":"string","format":"binary","description":"图片文件"}},"required":["file"]}}}},"responses":{"201":{"description":"上传成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UploadImageResponseDto"}}}},"400":{"description":"请求错误（文件类型不支持、文件过大等）"},"401":{"description":"未授权（缺少或无效的 JWT Token）"}},"security":[{"bearer":[]}],"summary":"上传图片","tags":["图片上传"]}},"/upload/my-files":{"get":{"description":"获取当前登录用户上传的所有文件","operationId":"UploadController_getMyFiles","parameters":[{"name":"category","required":false,"in":"query","description":"文件分类","schema":{"type":"string","enum":["avatar","other"]}},{"name":"page","required":false,"in":"query","description":"页码","schema":{"minimum":1,"default":1,"type":"number"}},{"name":"limit","required":false,"in":"query","description":"每页数量","schema":{"minimum":1,"default":20,"type":"number"}}],"responses":{"200":{"description":"获取成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FileListResponseDto"}}}},"401":{"description":"未授权"}},"security":[{"bearer":[]}],"summary":"获取我的文件列表","tags":["图片上传"]}},"/upload/{fileId}":{"delete":{"description":"删除指定的文件（仅允许上传者删除）","operationId":"UploadController_deleteFile","parameters":[{"name":"fileId","required":true,"in":"path","description":"文件ID","schema":{"type":"string"}}],"responses":{"200":{"description":"删除成功"},"400":{"description":"文件不存在或无权删除"},"401":{"description":"未授权"}},"security":[{"bearer":[]}],"summary":"删除文件","tags":["图片上传"]},"get":{"description":"获取指定文件的详细信息","operationId":"UploadController_getFileById","parameters":[{"name":"fileId","required":true,"in":"path","description":"文件ID","schema":{"type":"string"}}],"responses":{"200":{"description":"获取成功"},"404":{"description":"文件不存在"}},"security":[{"bearer":[]}],"summary":"获取文件详情","tags":["图片上传"]}},"/article/list":{"get":{"description":"获取已发布的文章列表，支持分页和筛选","operationId":"PublicArticleController_findAll","parameters":[{"name":"page","required":false,"in":"query","description":"页码，从 1 开始","schema":{"minimum":1,"example":1,"type":"number"}},{"name":"pageSize","required":false,"in":"query","description":"每页条数，默认 20，最大 100","schema":{"minimum":1,"maximum":100,"example":20,"type":"number"}},{"name":"keyword","required":false,"in":"query","description":"关键字搜索（标题、摘要）","schema":{"type":"string"}},{"name":"categoryId","required":false,"in":"query","description":"分类 ID","schema":{"example":1,"type":"number"}}],"responses":{"200":{"description":"返回文章列表","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PublicArticleListVO"}}}}},"summary":"获取文章列表","tags":["文章 - 用户端"]}},"/article/featured":{"get":{"description":"获取推荐的文章列表","operationId":"PublicArticleController_findFeatured","parameters":[{"name":"limit","required":false,"in":"query","description":"数量限制，默认10","schema":{"type":"string"}}],"responses":{"200":{"description":"返回推荐文章列表","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PublicArticleListItemVO"}}}}}},"summary":"获取推荐文章","tags":["文章 - 用户端"]}},"/article/top":{"get":{"description":"获取置顶的文章列表","operationId":"PublicArticleController_findTop","parameters":[{"name":"limit","required":false,"in":"query","description":"数量限制，默认5","schema":{"type":"string"}}],"responses":{"200":{"description":"返回置顶文章列表","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PublicArticleListItemVO"}}}}}},"summary":"获取置顶文章","tags":["文章 - 用户端"]}},"/article/detail/{uid}":{"get":{"description":"根据 UID 获取文章详情，并增加阅读量","operationId":"PublicArticleController_findOne","parameters":[{"name":"uid","required":true,"in":"path","description":"文章 UID","schema":{"type":"string"}}],"responses":{"200":{"description":"返回文章详情","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PublicArticleDetailVO"}}}}},"summary":"获取文章详情","tags":["文章 - 用户端"]}},"/article/like/{uid}":{"post":{"description":"为文章点赞","operationId":"PublicArticleController_like","parameters":[{"name":"uid","required":true,"in":"path","description":"文章 UID","schema":{"type":"string"}}],"responses":{"200":{"description":"返回当前点赞数"}},"summary":"点赞文章","tags":["文章 - 用户端"]}},"/article/category/{categoryId}":{"get":{"description":"获取指定分类下的文章列表","operationId":"PublicArticleController_findByCategory","parameters":[{"name":"categoryId","required":true,"in":"path","description":"分类 ID","schema":{"type":"string"}},{"name":"page","required":false,"in":"query","description":"页码，从 1 开始","schema":{"minimum":1,"example":1,"type":"number"}},{"name":"pageSize","required":false,"in":"query","description":"每页条数，默认 20，最大 100","schema":{"minimum":1,"maximum":100,"example":20,"type":"number"}},{"name":"keyword","required":false,"in":"query","description":"关键字搜索（标题、摘要）","schema":{"type":"string"}}],"responses":{"200":{"description":"返回文章列表","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PublicArticleListVO"}}}}},"summary":"按分类获取文章","tags":["文章 - 用户端"]}},"/survey/list":{"get":{"description":"获取当前进行中的问卷列表","operationId":"PublicSurveyController_findActive","parameters":[],"responses":{"200":{"description":"返回问卷列表","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PublicSurveyListItemVO"}}}}}},"summary":"获取问卷列表","tags":["问卷 - 用户端"]}},"/survey/category/{categoryId}":{"get":{"description":"获取指定分类下进行中的问卷","operationId":"PublicSurveyController_findByCategory","parameters":[{"name":"categoryId","required":true,"in":"path","description":"分类 ID","schema":{"type":"string"}}],"responses":{"200":{"description":"返回问卷列表","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PublicSurveyListItemVO"}}}}}},"summary":"按分类获取问卷","tags":["问卷 - 用户端"]}},"/survey/detail/{uid}":{"get":{"description":"根据 UID 获取问卷详情，用于答题","operationId":"PublicSurveyController_findOne","parameters":[{"name":"uid","required":true,"in":"path","description":"问卷 UID","schema":{"type":"string"}}],"responses":{"200":{"description":"返回问卷详情","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PublicSurveyDetailVO"}}}}},"summary":"获取问卷详情","tags":["问卷 - 用户端"]}},"/config/module/{moduleCode}":{"get":{"description":"获取指定模块下所有启用的配置项","operationId":"PublicConfigController_findByModule","parameters":[{"name":"moduleCode","required":true,"in":"path","description":"模块编码","schema":{"example":"article","type":"string"}}],"responses":{"200":{"description":"返回配置列表","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PublicConfigItemVO"}}}}}},"summary":"获取模块配置列表","tags":["配置 - 用户端"]}},"/config/module/{moduleCode}/values":{"get":{"description":"获取指定模块下所有配置的键值对","operationId":"PublicConfigController_getModuleValues","parameters":[{"name":"moduleCode","required":true,"in":"path","description":"模块编码","schema":{"example":"article","type":"string"}}],"responses":{"200":{"description":"返回配置键值对","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PublicConfigValueVO"}}}}}},"summary":"获取模块配置值","tags":["配置 - 用户端"]}},"/config/{moduleCode}/{itemKey}":{"get":{"description":"根据 moduleCode 和 itemKey 获取单个配置的值","operationId":"PublicConfigController_getValue","parameters":[{"name":"moduleCode","required":true,"in":"path","description":"模块编码","schema":{"example":"article","type":"string"}},{"name":"itemKey","required":true,"in":"path","description":"配置项 key","schema":{"example":"max_article_count","type":"string"}}],"responses":{"200":{"description":"返回配置值"}},"summary":"获取单个配置值","tags":["配置 - 用户端"]}},"/config/batch/{moduleCode}/{itemKeys}":{"get":{"description":"一次获取多个配置项的值，itemKeys 用逗号分隔","operationId":"PublicConfigController_getBatchValues","parameters":[{"name":"moduleCode","required":true,"in":"path","description":"模块编码","schema":{"example":"article","type":"string"}},{"name":"itemKeys","required":true,"in":"path","description":"配置项 keys（逗号分隔）","schema":{"example":"key1,key2,key3","type":"string"}}],"responses":{"200":{"description":"返回配置键值对映射"}},"summary":"批量获取配置值","tags":["配置 - 用户端"]}},"/admin/auth/login":{"post":{"operationId":"AdminAuthController_login","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminLoginDto"}}}},"responses":{"201":{"description":""}},"summary":"管理员登录","tags":["admin-auth"]}},"/admin/auth/register":{"post":{"operationId":"AdminAuthController_register","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminCreateUserDto"}}}},"responses":{"201":{"description":""}},"summary":"创建管理员并自动登录（根据权限控制）","tags":["admin-auth"]}},"/admin/auth/refresh":{"post":{"operationId":"AdminAuthController_refresh","parameters":[],"responses":{"201":{"description":""}},"summary":"刷新 Access（轮换 RefreshToken）","tags":["admin-auth"]}},"/admin/users/create":{"post":{"operationId":"AdminUsersController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminCreateUserDto"}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"创建管理员（POST）","tags":["admin-users"]}},"/admin/users":{"get":{"operationId":"AdminUsersController_list","parameters":[{"name":"keyword","required":false,"in":"query","description":"按 username/email/nickname 模糊搜索","schema":{"type":"string"}},{"name":"status","required":false,"in":"query","description":"active|inactive|banned","schema":{"type":"string"}},{"name":"page","required":false,"in":"query","description":"页码（默认1）","schema":{"type":"string"}},{"name":"pageSize","required":false,"in":"query","description":"每页条数（默认20）","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"管理员列表（GET，支持分页/搜索）","tags":["admin-users"]}},"/admin/users/detail":{"post":{"operationId":"AdminUsersController_detail","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdDto"}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"管理员详情（POST）","tags":["admin-users"]}},"/admin/users/update":{"post":{"operationId":"AdminUsersController_update","parameters":[],"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"更新管理员资料（POST，目标管理员）","tags":["admin-users"]}},"/admin/users/delete":{"post":{"operationId":"AdminUsersController_remove","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdDto"}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"删除管理员（POST）","tags":["admin-users"]}},"/admin/users/batch-delete":{"post":{"operationId":"AdminUsersController_batchRemove","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdsDto"}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"批量删除管理员（POST）","tags":["admin-users"]}},"/admin/users/assign-roles":{"post":{"operationId":"AdminUsersController_assignRoles","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AssignRolesDto"}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"为管理员分配角色（POST，按 roleCodes 全量覆盖）","tags":["admin-users"]}},"/admin/users/me":{"get":{"operationId":"AdminUsersController_me","parameters":[],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"我的信息（GET）","tags":["admin-users"]}},"/admin/users/me/update":{"post":{"operationId":"AdminUsersController_updateMe","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminUpdateUserDto"}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"更新我的资料（POST）","tags":["admin-users"]}},"/admin/users/me/password":{"post":{"operationId":"AdminUsersController_changePassword","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangePasswordDto"}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"修改我的密码（POST）","tags":["admin-users"]}},"/admin/roles/create":{"post":{"operationId":"AdminRolesController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateRoleDto"}}}},"responses":{"201":{"description":"角色创建成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminRole"}}}}},"security":[{"bearer":[]}],"summary":"创建角色（POST）","tags":["admin-roles"]}},"/admin/roles":{"get":{"operationId":"AdminRolesController_findAll","parameters":[{"name":"keyword","required":false,"in":"query","description":"按 name/code 模糊搜索","schema":{"type":"string"}},{"name":"page","required":false,"in":"query","description":"页码（默认1）","schema":{"type":"string"}},{"name":"pageSize","required":false,"in":"query","description":"每页条数（默认20）","schema":{"type":"string"}}],"responses":{"200":{"description":"返回角色列表","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AdminRole"}}}}}},"security":[{"bearer":[]}],"summary":"获取角色列表（GET）","tags":["admin-roles"]}},"/admin/roles/detail":{"post":{"operationId":"AdminRolesController_detail","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdDto"}}}},"responses":{"200":{"description":"返回角色信息","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminRole"}}}}},"security":[{"bearer":[]}],"summary":"根据ID获取角色（POST）","tags":["admin-roles"]}},"/admin/roles/update":{"post":{"operationId":"AdminRolesController_update","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateRoleDto"}}}},"responses":{"200":{"description":"角色更新成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminRole"}}}}},"security":[{"bearer":[]}],"summary":"更新角色（POST）","tags":["admin-roles"]}},"/admin/roles/delete":{"post":{"operationId":"AdminRolesController_remove","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeleteRoleDto"}}}},"responses":{"200":{"description":"角色删除成功"}},"security":[{"bearer":[]}],"summary":"删除角色（POST）","tags":["admin-roles"]}},"/admin/roles/assign-permissions":{"post":{"operationId":"AdminRolesController_assignPermissions","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AssignPermissionsDto"}}}},"responses":{"200":{"description":"权限分配成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminRole"}}}}},"security":[{"bearer":[]}],"summary":"为角色分配权限（POST）","tags":["admin-roles"]}},"/admin/roles/batch-delete":{"post":{"operationId":"AdminRolesController_batchRemove","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdsDto"}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"批量删除角色（POST）","tags":["admin-roles"]}},"/admin/permissions/create":{"post":{"operationId":"AdminPermissionsController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreatePermissionDto"}}}},"responses":{"201":{"description":"权限创建成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminPermission"}}}}},"security":[{"bearer":[]}],"summary":"创建权限（POST）","tags":["admin-permissions"]}},"/admin/permissions":{"get":{"operationId":"AdminPermissionsController_findAll","parameters":[{"name":"keyword","required":false,"in":"query","description":"按 name/code 模糊搜索","schema":{"type":"string"}},{"name":"page","required":false,"in":"query","description":"页码（默认1）","schema":{"type":"string"}},{"name":"pageSize","required":false,"in":"query","description":"每页条数（默认20）","schema":{"type":"string"}}],"responses":{"200":{"description":"返回权限列表","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AdminPermission"}}}}}},"security":[{"bearer":[]}],"summary":"获取权限列表（GET）","tags":["admin-permissions"]}},"/admin/permissions/{id}":{"get":{"operationId":"AdminPermissionsController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"返回权限信息","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminPermission"}}}}},"security":[{"bearer":[]}],"summary":"根据ID获取权限（GET）","tags":["admin-permissions"]}},"/admin/permissions/update":{"post":{"operationId":"AdminPermissionsController_update","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdatePermissionDto"}}}},"responses":{"200":{"description":"权限更新成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminPermission"}}}}},"security":[{"bearer":[]}],"summary":"更新权限（POST）","tags":["admin-permissions"]}},"/admin/permissions/delete":{"post":{"operationId":"AdminPermissionsController_remove","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeletePermissionDto"}}}},"responses":{"200":{"description":"权限删除成功"}},"security":[{"bearer":[]}],"summary":"删除权限（POST）","tags":["admin-permissions"]}},"/admin/permissions/batch-delete":{"post":{"operationId":"AdminPermissionsController_batchRemove","parameters":[],"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"批量删除权限（POST）","tags":["admin-permissions"]}},"/admin/credentials/create":{"post":{"operationId":"AdminCredentialsController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCredentialDto"}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"创建凭据（激活）","tags":["admin-credentials"]}},"/admin/credentials":{"get":{"operationId":"AdminCredentialsController_list","parameters":[{"name":"appId","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"查询凭据列表（可按 appId 过滤）","tags":["admin-credentials"]}},"/admin/credentials/update":{"post":{"operationId":"AdminCredentialsController_update","parameters":[{"name":"appId","required":true,"in":"query","schema":{"type":"string"}},{"name":"kid","required":true,"in":"query","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateCredentialDto"}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"更新凭据（状态/时间窗/IP 白名单等）","tags":["admin-credentials"]}},"/admin/credentials/revoke":{"post":{"operationId":"AdminCredentialsController_revoke","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RevokeCredentialDto"}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"吊销凭据","tags":["admin-credentials"]}},"/admin/credentials/rotate":{"post":{"operationId":"AdminCredentialsController_rotate","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RotateCredentialDto"}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"轮换密钥（新增 newKid 并可吊销旧的）","tags":["admin-credentials"]}},"/admin/operation-logs":{"get":{"description":"支持分页、多条件筛选和关键字搜索","operationId":"OperationLoggerController_findAll","parameters":[{"name":"page","required":false,"in":"query","description":"页码，从 1 开始","schema":{"minimum":1,"example":1,"type":"number"}},{"name":"pageSize","required":false,"in":"query","description":"每页条数，默认 20，最大 200","schema":{"minimum":1,"maximum":200,"example":20,"type":"number"}},{"name":"adminId","required":false,"in":"query","description":"管理员ID","schema":{"example":1,"type":"number"}},{"name":"adminUsername","required":false,"in":"query","description":"管理员用户名（模糊搜索）","schema":{"example":"admin","type":"string"}},{"name":"module","required":false,"in":"query","description":"操作模块","schema":{"example":"用户管理","type":"string"}},{"name":"action","required":false,"in":"query","description":"操作动作","schema":{"example":"CREATE","type":"string","enum":["CREATE","UPDATE","DELETE","ENABLE","DISABLE","LOGIN","LOGOUT","EXPORT","IMPORT","OTHER"]}},{"name":"targetType","required":false,"in":"query","description":"目标对象类型","schema":{"example":"USER","type":"string","enum":["USER","ROLE","PERMISSION","CONFIG","CONTENT","OTHER"]}},{"name":"targetId","required":false,"in":"query","description":"目标对象ID","schema":{"example":"123","type":"string"}},{"name":"success","required":false,"in":"query","description":"是否操作成功","schema":{"example":true,"type":"boolean"}},{"name":"ip","required":false,"in":"query","description":"IP地址（模糊搜索）","schema":{"example":"192.168.1","type":"string"}},{"name":"requestPath","required":false,"in":"query","description":"请求路径（模糊搜索）","schema":{"example":"/admin/users","type":"string"}},{"name":"startTime","required":false,"in":"query","description":"开始时间（ISO 8601 格式）","schema":{"format":"date-time","example":"2025-01-01T00:00:00.000Z","type":"string"}},{"name":"endTime","required":false,"in":"query","description":"结束时间（ISO 8601 格式）","schema":{"format":"date-time","example":"2025-12-31T23:59:59.999Z","type":"string"}},{"name":"keyword","required":false,"in":"query","description":"关键字搜索（模糊匹配管理员用户名、描述、请求路径）","schema":{"example":"用户","type":"string"}},{"name":"sortBy","required":false,"in":"query","description":"排序字段","schema":{"example":"createdAt","type":"string","enum":["id","createdAt","durationMs"]}},{"name":"sortOrder","required":false,"in":"query","description":"排序方向","schema":{"example":"DESC","type":"string","enum":["ASC","DESC"]}}],"responses":{"200":{"description":"查询成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OperationLogListVO"}}}}},"security":[{"bearer":[]}],"summary":"查询操作日志列表","tags":["admin-operation-log"]}},"/admin/operation-logs/detail":{"post":{"description":"根据日志ID查询完整的操作日志信息","operationId":"OperationLoggerController_findOne","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdDto"}}}},"responses":{"200":{"description":"查询成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OperationLogDetailVO"}}}}},"security":[{"bearer":[]}],"summary":"查询操作日志详情","tags":["admin-operation-log"]}},"/admin/operation-logs/stats":{"get":{"description":"获取今日、本周、本月的操作统计，以及模块和动作维度的统计","operationId":"OperationLoggerController_getStats","parameters":[],"responses":{"200":{"description":"查询成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OperationLogStatsVO"}}}}},"security":[{"bearer":[]}],"summary":"获取操作日志统计数据","tags":["admin-operation-log"]}},"/admin/operation-logs/timeline":{"get":{"description":"获取最近N天的操作趋势数据","operationId":"OperationLoggerController_getTimeline","parameters":[{"name":"days","required":false,"in":"query","description":"统计天数，默认7天，最大30天","schema":{"example":7,"type":"string"}}],"responses":{"200":{"description":"查询成功","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OperationLogTimelineVO"}}}}}},"security":[{"bearer":[]}],"summary":"获取操作日志时间线","tags":["admin-operation-log"]}},"/admin/operation-logs/by-admin":{"get":{"description":"查询指定管理员的最近操作记录","operationId":"OperationLoggerController_findByAdmin","parameters":[{"name":"adminId","required":true,"in":"query","description":"管理员ID","schema":{"example":1,"type":"string"}},{"name":"limit","required":false,"in":"query","description":"返回记录数，默认20，最大100","schema":{"example":20,"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"根据管理员ID查询操作日志","tags":["admin-operation-log"]}},"/admin/operation-logs/by-target":{"get":{"description":"查询针对指定目标对象的操作记录","operationId":"OperationLoggerController_findByTarget","parameters":[{"name":"targetType","required":true,"in":"query","description":"目标类型","schema":{"enum":["USER","ROLE","PERMISSION","CONFIG","CONTENT","OTHER"],"type":"string"}},{"name":"targetId","required":true,"in":"query","description":"目标ID","schema":{"example":"123","type":"string"}},{"name":"limit","required":false,"in":"query","description":"返回记录数，默认20，最大100","schema":{"example":20,"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"根据目标对象查询操作日志","tags":["admin-operation-log"]}},"/admin/operation-logs/cleanup":{"post":{"description":"清理指定天数之前的操作日志，默认90天","operationId":"OperationLoggerController_cleanup","parameters":[{"name":"days","required":false,"in":"query","description":"保留天数，默认90天，最小30天","schema":{"example":90,"type":"string"}}],"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"清理过期日志","tags":["admin-operation-log"]}},"/admin/articles/create":{"post":{"operationId":"ArticleController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateArticleDto"}}}},"responses":{"201":{"description":"创建成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ArticleDetailVO"}}}}},"security":[{"bearer":[]}],"summary":"创建文章","tags":["admin-article"]}},"/admin/articles":{"get":{"description":"支持分页、关键字搜索、多条件筛选","operationId":"ArticleController_findAll","parameters":[{"name":"page","required":false,"in":"query","description":"页码，从 1 开始","schema":{"minimum":1,"example":1,"type":"number"}},{"name":"pageSize","required":false,"in":"query","description":"每页条数，默认 20，最大 100","schema":{"minimum":1,"maximum":100,"example":20,"type":"number"}},{"name":"keyword","required":false,"in":"query","description":"关键字搜索（标题、摘要）","schema":{"example":"公告","type":"string"}},{"name":"status","required":false,"in":"query","description":"文章状态","schema":{"type":"string","enum":["draft","published","offline"]}},{"name":"categoryId","required":false,"in":"query","description":"分类 ID","schema":{"type":"number"}},{"name":"isTop","required":false,"in":"query","description":"是否置顶","schema":{"type":"boolean"}},{"name":"isFeatured","required":false,"in":"query","description":"是否推荐","schema":{"type":"boolean"}},{"name":"createdBy","required":false,"in":"query","description":"创建人 ID","schema":{"type":"number"}},{"name":"tag","required":false,"in":"query","description":"标签（精确匹配）","schema":{"example":"公告","type":"string"}},{"name":"startTime","required":false,"in":"query","description":"开始时间（ISO 8601）","schema":{"format":"date-time","type":"string"}},{"name":"endTime","required":false,"in":"query","description":"结束时间（ISO 8601）","schema":{"format":"date-time","type":"string"}},{"name":"includeDeleted","required":false,"in":"query","description":"是否包含已删除","schema":{"default":false,"type":"boolean"}},{"name":"sortBy","required":false,"in":"query","description":"排序字段","schema":{"default":"createdAt","type":"string","enum":["id","createdAt","updatedAt","publishedAt","viewCount","likeCount","sortOrder"]}},{"name":"sortOrder","required":false,"in":"query","description":"排序方向","schema":{"default":"DESC","type":"string","enum":["ASC","DESC"]}}],"responses":{"200":{"description":"查询成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ArticleListVO"}}}}},"security":[{"bearer":[]}],"summary":"查询文章列表","tags":["admin-article"]}},"/admin/articles/detail":{"post":{"operationId":"ArticleController_findOne","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdDto"}}}},"responses":{"200":{"description":"查询成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ArticleDetailVO"}}}}},"security":[{"bearer":[]}],"summary":"查询文章详情","tags":["admin-article"]}},"/admin/articles/stats":{"get":{"operationId":"ArticleController_getStats","parameters":[],"responses":{"200":{"description":"查询成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ArticleStatsVO"}}}}},"security":[{"bearer":[]}],"summary":"获取文章统计数据","tags":["admin-article"]}},"/admin/articles/update":{"post":{"operationId":"ArticleController_update","parameters":[],"responses":{"200":{"description":"更新成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ArticleDetailVO"}}}}},"security":[{"bearer":[]}],"summary":"更新文章","tags":["admin-article"]}},"/admin/articles/publish":{"post":{"operationId":"ArticleController_publish","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdDto"}}}},"responses":{"200":{"description":"发布成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ArticleDetailVO"}}}}},"security":[{"bearer":[]}],"summary":"发布文章","tags":["admin-article"]}},"/admin/articles/offline":{"post":{"operationId":"ArticleController_offline","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdDto"}}}},"responses":{"200":{"description":"下线成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ArticleDetailVO"}}}}},"security":[{"bearer":[]}],"summary":"下线文章","tags":["admin-article"]}},"/admin/articles/set-top":{"post":{"operationId":"ArticleController_setTop","parameters":[{"name":"isTop","required":true,"in":"query","description":"true=置顶, false=取消置顶","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdDto"}}}},"responses":{"200":{"description":"操作成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ArticleDetailVO"}}}}},"security":[{"bearer":[]}],"summary":"设置/取消置顶","tags":["admin-article"]}},"/admin/articles/set-featured":{"post":{"operationId":"ArticleController_setFeatured","parameters":[{"name":"isFeatured","required":true,"in":"query","description":"true=推荐, false=取消推荐","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdDto"}}}},"responses":{"200":{"description":"操作成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ArticleDetailVO"}}}}},"security":[{"bearer":[]}],"summary":"设置/取消推荐","tags":["admin-article"]}},"/admin/articles/delete":{"post":{"operationId":"ArticleController_remove","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdDto"}}}},"responses":{"200":{"description":"删除成功"}},"security":[{"bearer":[]}],"summary":"删除文章（软删除）","tags":["admin-article"]}},"/admin/articles/batch-delete":{"post":{"operationId":"ArticleController_batchRemove","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdsDto"}}}},"responses":{"200":{"description":"删除成功"}},"security":[{"bearer":[]}],"summary":"批量删除文章（软删除）","tags":["admin-article"]}},"/admin/articles/restore":{"post":{"operationId":"ArticleController_restore","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdDto"}}}},"responses":{"200":{"description":"恢复成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ArticleDetailVO"}}}}},"security":[{"bearer":[]}],"summary":"恢复已删除的文章","tags":["admin-article"]}},"/admin/module-config/create":{"post":{"operationId":"ModuleConfigController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateModuleConfigDto"}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"创建配置项","tags":["模块配置管理"]}},"/admin/module-config/list":{"get":{"operationId":"ModuleConfigController_findAll","parameters":[{"name":"page","required":false,"in":"query","description":"页码，从 1 开始","schema":{"minimum":1,"example":1,"type":"number"}},{"name":"pageSize","required":false,"in":"query","description":"每页条数，默认 20，最大 100","schema":{"minimum":1,"maximum":100,"example":20,"type":"number"}},{"name":"moduleCode","required":false,"in":"query","description":"模块编码","schema":{"example":"article","type":"string"}},{"name":"itemKey","required":false,"in":"query","description":"配置项 key（精确匹配）","schema":{"type":"string"}},{"name":"itemType","required":false,"in":"query","description":"配置项类型","schema":{"type":"string","enum":["switch","number","text","json","select","multiselect"]}},{"name":"status","required":false,"in":"query","description":"状态","schema":{"type":"string","enum":["enabled","disabled"]}},{"name":"keyword","required":false,"in":"query","description":"关键字搜索（模块名称、配置项名称、描述）","schema":{"type":"string"}},{"name":"includeDeleted","required":false,"in":"query","description":"是否包含已删除","schema":{"default":false,"type":"boolean"}},{"name":"sortBy","required":false,"in":"query","description":"排序字段","schema":{"default":"sortOrder","type":"string","enum":["id","createdAt","updatedAt","sortOrder","moduleCode"]}},{"name":"sortOrder","required":false,"in":"query","description":"排序方向","schema":{"default":"DESC","type":"string","enum":["ASC","DESC"]}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"分页查询配置列表","tags":["模块配置管理"]}},"/admin/module-config/stats":{"get":{"operationId":"ModuleConfigController_getStats","parameters":[],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"获取配置统计数据","tags":["模块配置管理"]}},"/admin/module-config/grouped":{"get":{"operationId":"ModuleConfigController_findGrouped","parameters":[],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"按模块分组获取所有配置","tags":["模块配置管理"]}},"/admin/module-config/module/{moduleCode}":{"get":{"operationId":"ModuleConfigController_findByModule","parameters":[{"name":"moduleCode","required":true,"in":"path","description":"模块编码","schema":{"example":"article","type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"获取指定模块的所有配置","tags":["模块配置管理"]}},"/admin/module-config/module/{moduleCode}/values":{"get":{"operationId":"ModuleConfigController_getModuleValues","parameters":[{"name":"moduleCode","required":true,"in":"path","description":"模块编码","schema":{"example":"article","type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"获取指定模块的所有配置值（键值对）","tags":["模块配置管理"]}},"/admin/module-config/key/{moduleCode}/{itemKey}":{"get":{"operationId":"ModuleConfigController_findByKey","parameters":[{"name":"moduleCode","required":true,"in":"path","description":"模块编码","schema":{"example":"article","type":"string"}},{"name":"itemKey","required":true,"in":"path","description":"配置项 key","schema":{"example":"max_article_count","type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"根据 moduleCode + itemKey 查询配置","tags":["模块配置管理"]}},"/admin/module-config/uid/{uid}":{"get":{"operationId":"ModuleConfigController_findByUid","parameters":[{"name":"uid","required":true,"in":"path","description":"配置 UID","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"根据 UID 查询配置详情","tags":["模块配置管理"]}},"/admin/module-config/detail":{"post":{"operationId":"ModuleConfigController_findOne","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdDto"}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"根据 ID 查询配置详情","tags":["模块配置管理"]}},"/admin/module-config/update":{"post":{"operationId":"ModuleConfigController_update","parameters":[],"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"更新配置项","tags":["模块配置管理"]}},"/admin/module-config/update-value":{"post":{"operationId":"ModuleConfigController_updateValue","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"properties":{"id":{"type":"number","description":"配置 ID"},"value":{"type":"string","description":"配置值"}},"required":["id","value"]}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"更新配置值（简化接口）","tags":["模块配置管理"]}},"/admin/module-config/enable":{"post":{"operationId":"ModuleConfigController_enable","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdDto"}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"启用配置项","tags":["模块配置管理"]}},"/admin/module-config/disable":{"post":{"operationId":"ModuleConfigController_disable","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdDto"}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"禁用配置项","tags":["模块配置管理"]}},"/admin/module-config/reset":{"post":{"operationId":"ModuleConfigController_resetToDefault","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdDto"}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"重置为默认值","tags":["模块配置管理"]}},"/admin/module-config/restore":{"post":{"operationId":"ModuleConfigController_restore","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdDto"}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"恢复已删除的配置项","tags":["模块配置管理"]}},"/admin/module-config/delete":{"post":{"operationId":"ModuleConfigController_remove","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdDto"}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"删除配置项（软删除）","tags":["模块配置管理"]}},"/admin/module-config/batch-delete":{"post":{"operationId":"ModuleConfigController_batchRemove","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdsDto"}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"批量删除配置项","tags":["模块配置管理"]}},"/admin/survey/create":{"post":{"operationId":"SurveyController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateSurveyDto"}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"创建问卷","tags":["问卷管理"]}},"/admin/survey/duplicate":{"post":{"operationId":"SurveyController_duplicate","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdDto"}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"复制问卷","tags":["问卷管理"]}},"/admin/survey/list":{"get":{"operationId":"SurveyController_findAll","parameters":[{"name":"page","required":false,"in":"query","description":"页码，从 1 开始","schema":{"minimum":1,"example":1,"type":"number"}},{"name":"pageSize","required":false,"in":"query","description":"每页条数，默认 20，最大 100","schema":{"minimum":1,"maximum":100,"example":20,"type":"number"}},{"name":"status","required":false,"in":"query","description":"状态","schema":{"type":"string","enum":["draft","active","closed"]}},{"name":"isArchived","required":false,"in":"query","description":"是否已归档","schema":{"type":"boolean"}},{"name":"createdBy","required":false,"in":"query","description":"创建人 ID","schema":{"type":"number"}},{"name":"categoryId","required":false,"in":"query","description":"分类 ID","schema":{"type":"number"}},{"name":"keyword","required":false,"in":"query","description":"关键字搜索（标题）","schema":{"type":"string"}},{"name":"startTime","required":false,"in":"query","description":"开始时间（创建时间范围）","schema":{"type":"string"}},{"name":"endTime","required":false,"in":"query","description":"结束时间（创建时间范围）","schema":{"type":"string"}},{"name":"includeDeleted","required":false,"in":"query","description":"是否包含已删除","schema":{"default":false,"type":"boolean"}},{"name":"sortBy","required":false,"in":"query","description":"排序字段","schema":{"default":"createdAt","type":"string","enum":["id","createdAt","updatedAt","sortOrder","submitCount","viewCount"]}},{"name":"sortOrder","required":false,"in":"query","description":"排序方向","schema":{"default":"DESC","type":"string","enum":["ASC","DESC"]}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"分页查询问卷列表","tags":["问卷管理"]}},"/admin/survey/stats":{"get":{"operationId":"SurveyController_getStats","parameters":[],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"获取问卷统计数据","tags":["问卷管理"]}},"/admin/survey/uid/{uid}":{"get":{"operationId":"SurveyController_findByUid","parameters":[{"name":"uid","required":true,"in":"path","description":"问卷 UID","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"根据 UID 查询问卷详情","tags":["问卷管理"]}},"/admin/survey/detail":{"post":{"operationId":"SurveyController_findOne","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdDto"}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"根据 ID 查询问卷详情","tags":["问卷管理"]}},"/admin/survey/update":{"post":{"operationId":"SurveyController_update","parameters":[],"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"更新问卷","tags":["问卷管理"]}},"/admin/survey/activate":{"post":{"operationId":"SurveyController_activate","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdDto"}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"发布问卷（开始收集）","tags":["问卷管理"]}},"/admin/survey/close":{"post":{"operationId":"SurveyController_close","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdDto"}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"关闭问卷（停止收集）","tags":["问卷管理"]}},"/admin/survey/archive":{"post":{"operationId":"SurveyController_archive","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"properties":{"id":{"type":"number","description":"问卷 ID"},"archiveCategoryId":{"type":"string","nullable":true,"description":"归档分类 ID"}},"required":["id"]}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"归档问卷","tags":["问卷管理"]}},"/admin/survey/unarchive":{"post":{"operationId":"SurveyController_unarchive","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdDto"}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"取消归档","tags":["问卷管理"]}},"/admin/survey/restore":{"post":{"operationId":"SurveyController_restore","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdDto"}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"恢复已删除的问卷","tags":["问卷管理"]}},"/admin/survey/delete":{"post":{"operationId":"SurveyController_remove","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdDto"}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"删除问卷（软删除）","tags":["问卷管理"]}},"/admin/survey/batch-delete":{"post":{"operationId":"SurveyController_batchRemove","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdsDto"}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"批量删除问卷","tags":["问卷管理"]}},"/admin/category/create":{"post":{"operationId":"CategoryController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCategoryDto"}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"创建分类","tags":["分类管理"]}},"/admin/category/list":{"get":{"operationId":"CategoryController_findAll","parameters":[{"name":"page","required":false,"in":"query","description":"页码，从 1 开始","schema":{"minimum":1,"example":1,"type":"number"}},{"name":"pageSize","required":false,"in":"query","description":"每页条数，默认 20，最大 100","schema":{"minimum":1,"maximum":100,"example":20,"type":"number"}},{"name":"moduleCode","required":false,"in":"query","description":"模块编码","schema":{"example":"article","type":"string"}},{"name":"parentId","required":false,"in":"query","description":"父分类 ID（传 0 或 null 查询根分类）","schema":{"type":"number"}},{"name":"status","required":false,"in":"query","description":"状态","schema":{"type":"string","enum":["enabled","disabled"]}},{"name":"keyword","required":false,"in":"query","description":"关键字搜索（名称）","schema":{"type":"string"}},{"name":"includeDeleted","required":false,"in":"query","description":"是否包含已删除","schema":{"default":false,"type":"boolean"}},{"name":"sortBy","required":false,"in":"query","description":"排序字段","schema":{"default":"sortOrder","type":"string","enum":["id","createdAt","updatedAt","sortOrder","name"]}},{"name":"sortOrder","required":false,"in":"query","description":"排序方向","schema":{"default":"DESC","type":"string","enum":["ASC","DESC"]}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"分页查询分类列表","tags":["分类管理"]}},"/admin/category/stats":{"get":{"operationId":"CategoryController_getStats","parameters":[],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"获取分类统计数据","tags":["分类管理"]}},"/admin/category/tree/{moduleCode}":{"get":{"operationId":"CategoryController_getTree","parameters":[{"name":"moduleCode","required":true,"in":"path","description":"模块编码","schema":{"example":"article","type":"string"}},{"name":"onlyEnabled","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"获取指定模块的分类树","tags":["分类管理"]}},"/admin/category/options/{moduleCode}":{"get":{"operationId":"CategoryController_getOptions","parameters":[{"name":"moduleCode","required":true,"in":"path","description":"模块编码","schema":{"example":"article","type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"获取分类选项列表（用于下拉选择）","tags":["分类管理"]}},"/admin/category/slug/{moduleCode}/{slug}":{"get":{"operationId":"CategoryController_findBySlug","parameters":[{"name":"moduleCode","required":true,"in":"path","description":"模块编码","schema":{"example":"article","type":"string"}},{"name":"slug","required":true,"in":"path","description":"URL 标识","schema":{"example":"tech-articles","type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"根据模块和 slug 查询分类","tags":["分类管理"]}},"/admin/category/uid/{uid}":{"get":{"operationId":"CategoryController_findByUid","parameters":[{"name":"uid","required":true,"in":"path","description":"分类 UID","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"根据 UID 查询分类详情","tags":["分类管理"]}},"/admin/category/detail/{id}":{"get":{"operationId":"CategoryController_findOne","parameters":[{"name":"id","required":true,"in":"path","description":"分类 ID","schema":{"type":"number"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"根据 ID 查询分类详情","tags":["分类管理"]}},"/admin/category/update/{id}":{"post":{"operationId":"CategoryController_update","parameters":[{"name":"id","required":true,"in":"path","description":"分类 ID","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateCategoryDto"}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"更新分类","tags":["分类管理"]}},"/admin/category/enable/{id}":{"post":{"operationId":"CategoryController_enable","parameters":[{"name":"id","required":true,"in":"path","description":"分类 ID","schema":{"type":"number"}}],"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"启用分类","tags":["分类管理"]}},"/admin/category/disable/{id}":{"post":{"operationId":"CategoryController_disable","parameters":[{"name":"id","required":true,"in":"path","description":"分类 ID","schema":{"type":"number"}}],"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"禁用分类","tags":["分类管理"]}},"/admin/category/move/{id}":{"post":{"operationId":"CategoryController_move","parameters":[{"name":"id","required":true,"in":"path","description":"分类 ID","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"properties":{"parentId":{"type":"number","nullable":true,"description":"新的父分类 ID，null 表示移动到根级"}}}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"移动分类（更改父分类）","tags":["分类管理"]}},"/admin/category/restore/{id}":{"post":{"operationId":"CategoryController_restore","parameters":[{"name":"id","required":true,"in":"path","description":"分类 ID","schema":{"type":"number"}}],"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"恢复已删除的分类","tags":["分类管理"]}},"/admin/category/delete/{id}":{"post":{"operationId":"CategoryController_remove","parameters":[{"name":"id","required":true,"in":"path","description":"分类 ID","schema":{"type":"number"}}],"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"删除分类（软删除）","tags":["分类管理"]}},"/admin/category/batch-delete":{"post":{"operationId":"CategoryController_batchRemove","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"properties":{"ids":{"type":"array","items":{"type":"number"}}}}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"批量删除分类（只删除叶子节点）","tags":["分类管理"]}},"/survey-response/submit":{"post":{"description":"提交问卷答案，需要登录。如果问卷设置了登录必填，则必须登录后才能提交。","operationId":"SurveyResponseController_submit","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateSurveyResponseDto"}}}},"responses":{"201":{"description":"提交成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubmitResultVO"}}}}},"security":[{"bearer":[]}],"summary":"提交问卷响应","tags":["问卷响应 - 用户端"]}},"/survey-response/my-list":{"get":{"description":"查询当前登录用户的所有问卷响应","operationId":"SurveyResponseController_findMyResponses","parameters":[{"name":"page","required":false,"in":"query","description":"页码，从 1 开始","schema":{"minimum":1,"example":1,"type":"number"}},{"name":"pageSize","required":false,"in":"query","description":"每页条数，默认 20，最大 100","schema":{"minimum":1,"maximum":100,"example":20,"type":"number"}},{"name":"surveyUid","required":false,"in":"query","description":"问卷 UID","schema":{"type":"string"}},{"name":"status","required":false,"in":"query","description":"响应状态","schema":{"type":"string","enum":["submitted","reviewing","approved","rejected"]}},{"name":"isEffective","required":false,"in":"query","description":"是否有效","schema":{"type":"boolean"}}],"responses":{"200":{"description":"返回响应列表","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SurveyResponseListVO"}}}}},"security":[{"bearer":[]}],"summary":"查询我的响应列表","tags":["问卷响应 - 用户端"]}},"/survey-response/detail/{uid}":{"get":{"description":"根据响应 UID 查询详情，只能查看自己的响应","operationId":"SurveyResponseController_findByUid","parameters":[{"name":"uid","required":true,"in":"path","description":"响应 UID","schema":{"type":"string"}}],"responses":{"200":{"description":"返回响应详情","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SurveyResponseDetailVO"}}}}},"security":[{"bearer":[]}],"summary":"查询响应详情","tags":["问卷响应 - 用户端"]}},"/survey-response/status/{surveyUid}":{"get":{"description":"查询当前用户在指定问卷的提交状态（是否已提交、提交次数等）","operationId":"SurveyResponseController_getUserSurveyStatus","parameters":[{"name":"surveyUid","required":true,"in":"path","description":"问卷 UID","schema":{"type":"string"}}],"responses":{"200":{"description":"返回提交状态","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserSurveyStatusVO"}}}}},"security":[{"bearer":[]}],"summary":"查询问卷提交状态","tags":["问卷响应 - 用户端"]}},"/survey-response/update/{uid}":{"post":{"description":"更新问卷响应，只能更新自己的响应，且仅限 submitted 状态","operationId":"SurveyResponseController_update","parameters":[{"name":"uid","required":true,"in":"path","description":"响应 UID","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateSurveyResponseDto"}}}},"responses":{"200":{"description":"更新成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SurveyResponseDetailVO"}}}}},"security":[{"bearer":[]}],"summary":"更新响应","tags":["问卷响应 - 用户端"]}},"/survey-response/delete/{uid}":{"post":{"description":"删除问卷响应（软删除），只能删除自己的响应，且仅限 submitted 状态","operationId":"SurveyResponseController_remove","parameters":[{"name":"uid","required":true,"in":"path","description":"响应 UID","schema":{"type":"string"}}],"responses":{"200":{"description":"删除成功"}},"security":[{"bearer":[]}],"summary":"删除响应","tags":["问卷响应 - 用户端"]}},"/survey-response/anonymous/submit":{"post":{"description":"匿名提交问卷答案。如果问卷设置了登录必填，则会返回 403 错误。","operationId":"AnonymousSurveyResponseController_submitAnonymous","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateSurveyResponseDto"}}}},"responses":{"201":{"description":"提交成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubmitResultVO"}}}}},"summary":"匿名提交问卷","tags":["问卷响应 - 匿名提交"]}}},"info":{"title":"jmni-server","description":"JMNI Server API 文档 - 供外部团队参考","version":"0.0.1","contact":{"name":"JMNI Team","url":"https://jmni.cn","email":"support@jmni.cn"},"license":{"name":"MIT","url":"https://opensource.org/licenses/MIT"}},"tags":[{"name":"auth","description":"用户认证 - 登录、注册、Token 管理"},{"name":"users","description":"用户管理 - 用户信息查询和更新"},{"name":"图片上传","description":"文件上传 - 图片上传和管理"},{"name":"文章 - 用户端","description":"文章 - 公开文章读取"},{"name":"问卷 - 用户端","description":"问卷 - 问卷获取和提交"},{"name":"配置 - 用户端","description":"配置 - 应用配置获取"}],"servers":[{"url":"https://api.jmni.cn","description":"生产环境"},{"url":"http://localhost:2233","description":"开发环境"}],"components":{"securitySchemes":{"access-token":{"scheme":"bearer","bearerFormat":"JWT","type":"http","description":"JWT Access Token"}},"schemas":{"SecurityMetricsResponse":{"type":"object","properties":{"failedLogins":{"type":"number","description":"失败登录次数","example":5},"signatureFailures":{"type":"number","description":"签名验证失败次数","example":10},"rateLimitHits":{"type":"number","description":"限流触发次数","example":3},"suspiciousActivities":{"type":"number","description":"可疑活动次数","example":2},"windowMinutes":{"type":"number","description":"查询时间窗口（分钟）","example":60}},"required":["failedLogins","signatureFailures","rateLimitHits","suspiciousActivities","windowMinutes"]},"BlacklistEntryResponse":{"type":"object","properties":{"ip":{"type":"string","description":"IP地址","example":"192.168.1.100"},"reason":{"type":"string","description":"封禁原因","example":"频繁登录失败"},"expiresAt":{"type":"number","description":"过期时间戳","example":1735689600000},"createdAt":{"type":"number","description":"创建时间戳","example":1704067200000},"createdBy":{"type":"string","description":"创建者","example":"admin_001"}},"required":["ip","reason","createdAt"]},"AddToBlacklistDto":{"type":"object","properties":{"ip":{"type":"string","description":"IP地址","example":"192.168.1.100"},"reason":{"type":"string","description":"封禁原因","example":"频繁登录失败，疑似暴力破解","maxLength":500},"expiresAt":{"type":"number","description":"过期时间戳（毫秒），不填则永久封禁","example":1735689600000},"createdBy":{"type":"string","description":"创建者标识","example":"admin_001","maxLength":100}},"required":["ip","reason"]},"SuccessResponse":{"type":"object","properties":{"success":{"type":"boolean","description":"操作是否成功","example":true}},"required":["success"]},"AutoBlacklistDto":{"type":"object","properties":{"reason":{"type":"string","description":"封禁原因","example":"可疑活动检测：登录失败次数过多","maxLength":500},"durationHours":{"type":"number","description":"封禁时长（小时），默认24小时","example":24,"minimum":1,"maximum":8760}},"required":["reason"]},"CleanupResponse":{"type":"object","properties":{"success":{"type":"boolean","description":"操作是否成功","example":true},"cleanedEntries":{"type":"number","description":"清理的黑名单条目数","example":5},"cleanedEvents":{"type":"number","description":"清理的安全事件数","example":100}},"required":["success","cleanedEntries","cleanedEvents"]},"SuspiciousCheckResponse":{"type":"object","properties":{"suspicious":{"type":"boolean","description":"IP是否可疑","example":true},"metrics":{"description":"安全指标详情","allOf":[{"$ref":"#/components/schemas/SecurityMetricsResponse"}]}},"required":["suspicious","metrics"]},"SecurityOverviewResponse":{"type":"object","properties":{"blacklist":{"type":"object","description":"黑名单统计","example":{"total":10,"permanent":3,"temporary":7}},"metrics":{"description":"安全指标","allOf":[{"$ref":"#/components/schemas/SecurityMetricsResponse"}]},"timestamp":{"type":"number","description":"时间戳","example":1704067200000}},"required":["blacklist","metrics","timestamp"]},"SlowQueryRecordResponse":{"type":"object","properties":{"sql":{"type":"string","description":"查询SQL（已脱敏）","example":"SELECT * FROM users WHERE id = ?"},"duration":{"type":"number","description":"执行时间（毫秒）","example":1500},"params":{"description":"查询参数","type":"array","items":{"type":"string"}},"timestamp":{"type":"number","description":"记录时间戳","example":1704067200000},"source":{"type":"string","description":"来源模块","example":"UserService"},"userId":{"type":"number","description":"用户ID","example":1001},"ip":{"type":"string","description":"IP地址","example":"192.168.1.100"}},"required":["sql","duration","timestamp"]},"QueryStatsResponse":{"type":"object","properties":{"totalQueries":{"type":"number","description":"总查询次数","example":10000},"slowQueries":{"type":"number","description":"慢查询次数","example":50},"avgDuration":{"type":"number","description":"平均执行时间（毫秒）","example":45.5},"maxDuration":{"type":"number","description":"最大执行时间（毫秒）","example":3500},"slowestQueries":{"description":"最慢的查询列表","type":"array","items":{"$ref":"#/components/schemas/SlowQueryRecordResponse"}}},"required":["totalQueries","slowQueries","avgDuration","maxDuration","slowestQueries"]},"CacheStatsResponse":{"type":"object","properties":{"totalKeys":{"type":"number","description":"缓存键总数","example":1500},"memoryUsage":{"type":"string","description":"内存使用量","example":"256MB"},"hitRate":{"type":"number","description":"缓存命中率","example":0.85}},"required":["totalKeys","memoryUsage"]},"CacheClearResponse":{"type":"object","properties":{"success":{"type":"boolean","description":"操作是否成功","example":true},"clearedKeys":{"type":"number","description":"清理的键数量","example":150}},"required":["success","clearedKeys"]},"SlowQueryCleanupResponse":{"type":"object","properties":{"success":{"type":"boolean","description":"操作是否成功","example":true},"cleanedCount":{"type":"number","description":"清理的记录数量","example":500}},"required":["success","cleanedCount"]},"StatsResetResponse":{"type":"object","properties":{"success":{"type":"boolean","description":"操作是否成功","example":true}},"required":["success"]},"DatabaseOverviewResponse":{"type":"object","properties":{"queryStats":{"description":"查询统计","allOf":[{"$ref":"#/components/schemas/QueryStatsResponse"}]},"cacheStats":{"description":"缓存统计","allOf":[{"$ref":"#/components/schemas/CacheStatsResponse"}]},"slowestQueries":{"description":"最慢查询","type":"array","items":{"$ref":"#/components/schemas/SlowQueryRecordResponse"}},"timestamp":{"type":"number","description":"时间戳","example":1704067200000}},"required":["queryStats","cacheStats","slowestQueries","timestamp"]},"CreateAlertRuleDto":{"type":"object","properties":{"name":{"type":"string","description":"规则名称","example":"CPU使用率过高","maxLength":100},"metric":{"type":"string","description":"监控指标名称","example":"cpu.usage","maxLength":100},"threshold":{"type":"number","description":"阈值","example":80,"minimum":0},"operator":{"type":"string","description":"比较操作符","enum":["gt","lt","eq","gte","lte"],"example":"gt"},"duration":{"type":"number","description":"持续时间（秒）","example":300,"minimum":1,"maximum":86400},"severity":{"type":"string","description":"告警级别","enum":["low","medium","high","critical"],"example":"high"},"enabled":{"type":"boolean","description":"是否启用","example":true},"channels":{"type":"array","description":"通知渠道","example":["email","slack"],"items":{"type":"string","enum":["email","sms","webhook","slack"]}},"recipients":{"description":"通知接收者（邮箱或ID列表）","example":["admin@example.com","ops@example.com"],"type":"array","items":{"type":"string"}}},"required":["name","metric","threshold","operator","duration","severity","enabled","channels","recipients"]},"RuleCreateResponse":{"type":"object","properties":{"ruleId":{"type":"string","description":"规则ID","example":"rule_1704067200000_abc123"}},"required":["ruleId"]},"UpdateAlertRuleDto":{"type":"object","properties":{"name":{"type":"string","description":"规则名称","example":"CPU使用率过高","maxLength":100},"threshold":{"type":"number","description":"阈值","example":90,"minimum":0},"operator":{"type":"string","description":"比较操作符","enum":["gt","lt","eq","gte","lte"]},"duration":{"type":"number","description":"持续时间（秒）","minimum":1,"maximum":86400},"severity":{"type":"string","description":"告警级别","enum":["low","medium","high","critical"]},"enabled":{"type":"boolean","description":"是否启用"},"channels":{"type":"array","description":"通知渠道","items":{"type":"string","enum":["email","sms","webhook","slack"]}},"recipients":{"description":"通知接收者","type":"array","items":{"type":"string"}}}},"ResolveAlertDto":{"type":"object","properties":{"resolution":{"type":"string","description":"解决方案描述","example":"已优化SQL查询，CPU使用率已恢复正常","maxLength":1000}},"required":["resolution"]},"CheckMetricsDto":{"type":"object","properties":{"metric":{"type":"string","description":"指标名称","example":"cpu.usage","maxLength":100},"value":{"type":"number","description":"指标值","example":85.5}},"required":["metric","value"]},"MonitoringOverviewResponse":{"type":"object","properties":{"system":{"type":"object","description":"系统状态","example":{"cpu":45.5,"memory":62.3,"load":1.2}},"application":{"type":"object","description":"应用状态","example":{"requests":10000,"errors":50,"responseTime":150}},"health":{"type":"object","description":"健康状态","example":{"status":"healthy","score":95,"services":4}},"business":{"type":"object","description":"业务指标","example":{"users":1000,"activeUsers":200,"alerts":3}},"alerts":{"type":"object","description":"告警统计","example":{"active":2,"critical":0,"high":1}},"timestamp":{"type":"number","description":"时间戳","example":1704067200000}},"required":["system","application","health","business","alerts","timestamp"]},"SendEmailCodeDto":{"type":"object","properties":{"email":{"type":"string","example":"user@example.com"},"scene":{"type":"string","enum":["register","login","reset"],"default":"register"}},"required":["email","scene"]},"LoginDto":{"type":"object","properties":{"account":{"type":"string","description":"登录账号（邮箱或用户名）","example":"john@example.com 或 john_doe"},"password":{"type":"string","description":"密码","minLength":8,"maxLength":64},"deviceId":{"type":"string","description":"设备ID（指纹或本地生成）","maxLength":64},"deviceName":{"type":"string","description":"设备名","example":"iPhone 14 Pro","maxLength":64},"platform":{"type":"string","description":"平台","example":"web","enum":["ios","android","web","desktop"]}},"required":["account","password"]},"CreateUserDto":{"type":"object","properties":{"username":{"type":"string","description":"用户名","example":"john_doe","minLength":3,"maxLength":50},"email":{"type":"string","description":"邮箱地址","example":"john@example.com"},"emailcode":{"type":"string","description":"注册用邮箱验证码（有 email 时必填）","minLength":4,"maxLength":8},"phone":{"type":"string","description":"手机号（含区号）","example":"+86-13800000000"},"password":{"type":"string","description":"密码","example":"Password123!","minLength":6,"maxLength":128},"nickname":{"type":"string","description":"昵称","maxLength":50}},"required":["password"]},"MFASetupDto":{"type":"object","properties":{}},"MFAVerifyDto":{"type":"object","properties":{}},"PasswordCheckDto":{"type":"object","properties":{}},"AlertSettingsDto":{"type":"object","properties":{}},"UpdateUserDto":{"type":"object","properties":{"nickname":{"type":"string","description":"昵称","maxLength":50},"avatar_url":{"type":"string","description":"头像 URL"},"gender":{"type":"string","description":"性别","enum":["unknown","male","female","other"]},"birthday":{"type":"string","description":"生日（YYYY-MM-DD）","example":"1990-06-01"},"country":{"type":"string","description":"国家/地区码（ISO 3166-1 alpha-2）","example":"CN"},"locale":{"type":"string","description":"语言（如 zh-CN）","example":"zh-CN","maxLength":10},"time_zone":{"type":"string","description":"时区（IANA）","example":"Asia/Shanghai","maxLength":40},"marketing_consent":{"type":"boolean","description":"营销/通知同意","example":false}}},"ChangePasswordDto":{"type":"object","properties":{"current":{"type":"string","description":"当前密码","example":"Old@123456"},"new":{"type":"string","description":"新密码","example":"New@123456"}},"required":["current","new"]},"WechatMpLoginDto":{"type":"object","properties":{"code":{"type":"string","description":"wx.login 返回的 code"},"encryptedData":{"type":"string","description":"wx.getUserInfo/手机授权返回的 encryptedData（可选用于拿 unionId）"},"iv":{"type":"string","description":"配套 IV（可选）"}},"required":["code"]},"UploadImageResponseDto":{"type":"object","properties":{"id":{"type":"string","description":"文件ID"},"filename":{"type":"string","description":"文件名"},"originalName":{"type":"string","description":"原始文件名"},"size":{"type":"number","description":"文件大小（字节）"},"mimeType":{"type":"string","description":"文件类型"},"url":{"type":"string","description":"访问URL"},"uploadedAt":{"format":"date-time","type":"string","description":"上传时间"}},"required":["id","filename","originalName","size","mimeType","url","uploadedAt"]},"FileListResponseDto":{"type":"object","properties":{"items":{"description":"文件列表","type":"array","items":{"type":"string"}},"total":{"type":"number","description":"总数"},"page":{"type":"number","description":"当前页"},"pageSize":{"type":"number","description":"每页数量"}},"required":["items","total","page","pageSize"]},"PublicArticleListItemVO":{"type":"object","properties":{"uid":{"type":"string","description":"文章 UID","example":"123456789012"},"title":{"type":"string","description":"标题","example":"如何使用 NestJS"},"subTitle":{"type":"string","description":"子标题"},"summary":{"type":"string","description":"摘要","example":"本文介绍..."},"coverUrl":{"type":"string","description":"封面图 URL"},"categoryId":{"type":"number","description":"分类 ID"},"categoryName":{"type":"string","description":"分类名称","example":"技术文章"},"tags":{"type":"array","description":"标签","items":{"type":"string"}},"isTop":{"type":"boolean","description":"是否置顶","example":false},"isFeatured":{"type":"boolean","description":"是否推荐","example":false},"viewCount":{"type":"number","description":"阅读量","example":100},"likeCount":{"type":"number","description":"点赞数","example":10},"publishedAt":{"type":"string","description":"发布时间（ISO 8601）"}},"required":["uid","title","summary","categoryName","isTop","isFeatured","viewCount","likeCount"]},"PublicArticleListVO":{"type":"object","properties":{"total":{"type":"number","description":"总记录数","example":100},"items":{"description":"文章列表","type":"array","items":{"$ref":"#/components/schemas/PublicArticleListItemVO"}},"page":{"type":"number","description":"当前页码","example":1},"pageSize":{"type":"number","description":"每页条数","example":20},"totalPages":{"type":"number","description":"总页数","example":5}},"required":["total","items","page","pageSize","totalPages"]},"PublicArticleDetailVO":{"type":"object","properties":{"uid":{"type":"string","description":"文章 UID","example":"123456789012"},"title":{"type":"string","description":"标题","example":"如何使用 NestJS"},"subTitle":{"type":"string","description":"子标题"},"summary":{"type":"string","description":"摘要","example":"本文介绍..."},"coverUrl":{"type":"string","description":"封面图 URL"},"categoryId":{"type":"number","description":"分类 ID"},"categoryName":{"type":"string","description":"分类名称","example":"技术文章"},"tags":{"type":"array","description":"标签","items":{"type":"string"}},"isTop":{"type":"boolean","description":"是否置顶","example":false},"isFeatured":{"type":"boolean","description":"是否推荐","example":false},"viewCount":{"type":"number","description":"阅读量","example":100},"likeCount":{"type":"number","description":"点赞数","example":10},"publishedAt":{"type":"string","description":"发布时间（ISO 8601）"},"content":{"type":"string","description":"文章内容"},"contentFormat":{"type":"string","description":"内容格式","enum":["markdown","html","text"],"example":"markdown"},"seoTitle":{"type":"string","description":"SEO 标题"},"seoKeywords":{"type":"string","description":"SEO 关键词"},"seoDescription":{"type":"string","description":"SEO 描述"}},"required":["uid","title","summary","categoryName","isTop","isFeatured","viewCount","likeCount","content","contentFormat","seoTitle","seoKeywords","seoDescription"]},"PublicSurveyListItemVO":{"type":"object","properties":{"uid":{"type":"string","description":"问卷 UID"},"title":{"type":"object","description":"问卷标题（多语言）"},"description":{"type":"object","description":"问卷描述（多语言）"},"themeColor":{"type":"string","description":"主题主色"},"loginRequired":{"type":"boolean","description":"是否需要登录"},"startTime":{"type":"string","description":"开始时间"},"endTime":{"type":"string","description":"截止时间"},"categoryId":{"type":"number","description":"分类 ID"},"categoryName":{"type":"string","description":"分类名称"}},"required":["uid","title","loginRequired","categoryName"]},"PublicSurveyDetailVO":{"type":"object","properties":{"uid":{"type":"string","description":"问卷 UID"},"title":{"type":"object","description":"问卷标题（多语言）"},"description":{"type":"object","description":"问卷描述（多语言）"},"themeColor":{"type":"string","description":"主题主色"},"loginRequired":{"type":"boolean","description":"是否需要登录"},"startTime":{"type":"string","description":"开始时间"},"endTime":{"type":"string","description":"截止时间"},"categoryId":{"type":"number","description":"分类 ID"},"categoryName":{"type":"string","description":"分类名称"},"topics":{"type":"object","description":"问卷结构（题目列表配置 JSON schema）"},"endMessage":{"type":"object","description":"结束语（多语言）"},"showQuestionIndex":{"type":"boolean","description":"是否显示题目编号"},"languagesList":{"description":"启用的多语言列表","type":"array","items":{"type":"string"}},"requireGameBinding":{"type":"boolean","description":"是否要求绑定游戏账号"},"maxSubmitTimesPerUser":{"type":"number","description":"每用户最大提交次数"}},"required":["uid","title","loginRequired","categoryName","showQuestionIndex","requireGameBinding","maxSubmitTimesPerUser"]},"PublicConfigItemVO":{"type":"object","properties":{"itemKey":{"type":"string","description":"配置项 key","example":"max_article_count"},"value":{"type":"string","description":"配置值","example":"100"},"itemType":{"type":"string","description":"值类型","enum":["switch","number","text","json","select","multiselect"],"example":"number"},"itemName":{"type":"string","description":"配置项名称","example":"最大文章数量"},"options":{"type":"array","description":"可选值列表（用于 select/multiselect 类型）","items":{"type":"object","properties":{"label":{"type":"string"},"value":{"type":"string"}}}},"description":{"type":"string","description":"配置说明","example":"系统允许的最大文章数量"}},"required":["itemKey","value","itemType","itemName","description"]},"PublicConfigValueVO":{"type":"object","properties":{"itemKey":{"type":"string","description":"配置项 key","example":"max_article_count"},"value":{"type":"string","description":"配置值","example":"100"},"itemType":{"type":"string","description":"值类型","enum":["switch","number","text","json","select","multiselect"],"example":"number"}},"required":["itemKey","value","itemType"]},"AdminLoginDto":{"type":"object","properties":{"account":{"type":"string","description":"登录账号（邮箱或用户名）","example":"john@example.com 或 john_doe"},"password":{"type":"string","description":"密码","minLength":8,"maxLength":64},"deviceId":{"type":"string","description":"设备ID（指纹或本地生成）","maxLength":64},"deviceName":{"type":"string","description":"设备名","example":"iPhone 14 Pro","maxLength":64},"platform":{"type":"string","description":"平台","example":"web","enum":["ios","android","web","desktop"]}},"required":["account","password"]},"AdminCreateUserDto":{"type":"object","properties":{"username":{"type":"string","description":"用户名","example":"john_doe","minLength":3,"maxLength":50},"password":{"type":"string","description":"密码","example":"Password123!","minLength":6,"maxLength":128},"email":{"type":"string","description":"邮箱地址","example":"john@example.com"},"nickname":{"type":"string","description":"昵称","maxLength":50},"emailcode":{"type":"string","description":"注册用邮箱验证码（有 email 时必填）","minLength":4,"maxLength":8},"roleCodes":{"description":"角色代码列表（可选，按 code 绑定）","example":["super_admin","ops"],"type":"array","items":{"type":"string"}}},"required":["password"]},"IdDto":{"type":"object","properties":{"id":{"type":"number","description":"主键ID","example":1}},"required":["id"]},"IdsDto":{"type":"object","properties":{"ids":{"description":"主键ID列表","example":[1,2,3],"type":"array","items":{"type":"string"}}},"required":["ids"]},"AssignRolesDto":{"type":"object","properties":{"userId":{"type":"number","description":"管理员ID","example":1},"roleCodes":{"description":"角色代码数组（全量覆盖）","example":["super_admin","editor"],"type":"array","items":{"type":"string"}}},"required":["userId","roleCodes"]},"AdminUpdateUserDto":{"type":"object","properties":{"nickname":{"type":"string","description":"昵称"},"email":{"type":"string","description":"邮箱"},"status":{"type":"string","description":"状态","enum":["active","inactive","banned"]}}},"CreateRoleDto":{"type":"object","properties":{"name":{"type":"string","description":"角色名称","example":"超级管理员"},"code":{"type":"string","description":"角色代码（唯一）","example":"super_admin","maxLength":64},"is_system":{"type":"boolean","description":"是否系统内置","example":false},"description":{"type":"string","description":"角色描述","maxLength":255},"permissionIds":{"description":"初始权限ID列表","type":"array","items":{"type":"number"}}},"required":["name","code"]},"AdminRole":{"type":"object","properties":{"id":{"type":"number","description":"角色ID"},"name":{"type":"string","description":"角色名称"},"code":{"type":"string","description":"角色代码","example":"super_admin"},"is_system":{"type":"boolean","description":"是否系统内置"},"description":{"type":"string","description":"角色描述"},"created_at":{"format":"date-time","type":"string","description":"创建时间"},"updated_at":{"format":"date-time","type":"string","description":"更新时间"}},"required":["id","name","code","is_system","created_at","updated_at"]},"UpdateRoleDto":{"type":"object","properties":{"id":{"type":"number","description":"角色ID"},"name":{"type":"string","description":"角色名称"},"code":{"type":"string","description":"角色代码（唯一）","maxLength":64},"is_system":{"type":"boolean","description":"是否系统内置"},"description":{"type":"string","description":"角色描述","maxLength":255}},"required":["id"]},"DeleteRoleDto":{"type":"object","properties":{"id":{"type":"number","description":"角色ID"}},"required":["id"]},"AssignPermissionsDto":{"type":"object","properties":{"roleId":{"type":"number","description":"角色ID","example":1},"permissionIds":{"description":"权限ID数组","example":[1,2,3],"type":"array","items":{"type":"string"}}},"required":["roleId","permissionIds"]},"CreatePermissionDto":{"type":"object","properties":{"name":{"type":"string","description":"权限名称","example":"创建用户"},"code":{"type":"string","description":"权限编码（唯一）","example":"user:create"},"type":{"type":"string","description":"类型","enum":["api","menu","action"],"default":"api"},"http_method":{"type":"string","description":"HTTP 方法（type=api 必填）","enum":["GET","POST","PUT","PATCH","DELETE","HEAD","OPTIONS"]},"http_path":{"type":"string","description":"HTTP 路径（type=api 必填）","example":"/admin/users/create"},"description":{"type":"string","description":"描述"}},"required":["name","code","type"]},"AdminPermission":{"type":"object","properties":{"name":{"type":"string","description":"权限名称"},"code":{"type":"string","description":"权限编码（唯一）"},"type":{"type":"string","description":"类型","default":"api"},"http_method":{"type":"string","description":"HTTP 方法"},"http_path":{"type":"string","description":"HTTP 路径"},"description":{"type":"string","description":"描述"},"created_at":{"format":"date-time","type":"string","description":"创建时间"},"updated_at":{"format":"date-time","type":"string","description":"更新时间"}},"required":["name","code","type","created_at","updated_at"]},"UpdatePermissionDto":{"type":"object","properties":{"id":{"type":"number","description":"权限ID"},"name":{"type":"string","description":"权限名称"},"code":{"type":"string","description":"权限编码（如允许变更）"},"type":{"type":"string","description":"类型","enum":["api","menu","action"]},"http_method":{"type":"string","description":"HTTP 方法（当最终 type=api 时需具备合法性）","enum":["GET","POST","PUT","PATCH","DELETE","HEAD","OPTIONS"]},"http_path":{"type":"string","description":"HTTP 路径（当最终 type=api 时需具备合法性）"},"description":{"type":"string","description":"描述"}},"required":["id"]},"DeletePermissionDto":{"type":"object","properties":{"id":{"type":"number","description":"权限ID"}},"required":["id"]},"CreateCredentialDto":{"type":"object","properties":{"appId":{"type":"string","description":"应用ID"},"kid":{"type":"string","description":"密钥ID","default":"k1"},"secret":{"type":"string","description":"HMAC 密钥明文（后端会加密存储）"},"alg":{"type":"string","enum":["sha256","sha512"],"default":"sha256"},"enc":{"type":"string","enum":["hex","base64"],"default":"hex"},"notBefore":{"type":"string","description":"生效时间（ISO8601）"},"expiresAt":{"type":"string","description":"过期时间（ISO8601）"},"allowIps":{"description":"IP 白名单","type":"array","items":{"type":"string"}}},"required":["appId","kid","secret","alg","enc"]},"UpdateCredentialDto":{"type":"object","properties":{"status":{"type":"string","enum":["active","inactive","revoked"]},"notBefore":{"type":"string","description":"生效时间"},"expiresAt":{"type":"string","description":"过期时间"},"allowIps":{"description":"IP 白名单","type":"array","items":{"type":"string"}},"description":{"type":"string","description":"备注"}}},"RevokeCredentialDto":{"type":"object","properties":{"appId":{"type":"string","description":"应用ID"},"kid":{"type":"string","description":"kid"},"reason":{"type":"string","description":"原因"}},"required":["appId","kid"]},"RotateCredentialDto":{"type":"object","properties":{"appId":{"type":"string","description":"应用ID"},"newKid":{"type":"string","description":"新 kid（例如 k2）"},"newSecret":{"type":"string","description":"新密钥明文"},"revokeOld":{"type":"boolean","description":"是否自动吊销旧密钥","default":true},"oldKid":{"type":"string","description":"旧 kid（若需要显式指定）"}},"required":["appId","newKid","newSecret","revokeOld"]},"OperationLogListItemVO":{"type":"object","properties":{"id":{"type":"number","description":"日志ID","example":1},"adminId":{"type":"number","description":"操作管理员ID（admin_users.id）","example":1},"adminUid":{"type":"string","description":"操作管理员UID（admin_users.uid）","example":"adm_1234567890"},"adminUsername":{"type":"string","description":"操作管理员用户名","example":"admin"},"module":{"type":"string","description":"操作模块","example":"用户管理"},"action":{"type":"string","description":"操作动作","enum":["CREATE","UPDATE","DELETE","ENABLE","DISABLE","LOGIN","LOGOUT","EXPORT","IMPORT","OTHER"],"example":"CREATE"},"description":{"type":"string","description":"操作描述","example":"创建了用户 john_doe"},"targetType":{"type":"string","description":"目标对象类型","enum":["USER","ROLE","PERMISSION","CONFIG","CONTENT","OTHER"],"example":"USER"},"targetId":{"type":"string","description":"目标对象ID","example":"123"},"httpMethod":{"type":"string","description":"HTTP请求方法","example":"POST"},"requestPath":{"type":"string","description":"请求路径","example":"/admin/users/create"},"ip":{"type":"string","description":"请求来源IP","example":"192.168.1.100"},"success":{"type":"boolean","description":"是否操作成功","example":true},"errorCode":{"type":"string","description":"错误码","example":"USER_NOT_FOUND"},"errorMessage":{"type":"string","description":"错误信息","example":"用户不存在"},"durationMs":{"type":"number","description":"请求耗时（毫秒）","example":150},"createdAt":{"type":"string","description":"操作时间（ISO 8601 格式）","example":"2025-01-01T12:00:00.000Z"}},"required":["id","adminId","adminUid","adminUsername","module","action","description","targetType","httpMethod","requestPath","ip","success","durationMs","createdAt"]},"OperationLogListVO":{"type":"object","properties":{"total":{"type":"number","description":"总记录数","example":100},"items":{"description":"日志列表","type":"array","items":{"$ref":"#/components/schemas/OperationLogListItemVO"}},"page":{"type":"number","description":"当前页码","example":1},"pageSize":{"type":"number","description":"每页条数","example":20},"totalPages":{"type":"number","description":"总页数","example":5}},"required":["total","items","page","pageSize","totalPages"]},"OperationLogDetailVO":{"type":"object","properties":{"id":{"type":"number","description":"日志ID","example":1},"adminId":{"type":"number","description":"操作管理员ID（admin_users.id）","example":1},"adminUid":{"type":"string","description":"操作管理员UID（admin_users.uid）","example":"adm_1234567890"},"adminUsername":{"type":"string","description":"操作管理员用户名","example":"admin"},"module":{"type":"string","description":"操作模块","example":"用户管理"},"action":{"type":"string","description":"操作动作","enum":["CREATE","UPDATE","DELETE","ENABLE","DISABLE","LOGIN","LOGOUT","EXPORT","IMPORT","OTHER"],"example":"CREATE"},"description":{"type":"string","description":"操作描述","example":"创建了用户 john_doe"},"targetType":{"type":"string","description":"目标对象类型","enum":["USER","ROLE","PERMISSION","CONFIG","CONTENT","OTHER"],"example":"USER"},"targetId":{"type":"string","description":"目标对象ID","example":"123"},"httpMethod":{"type":"string","description":"HTTP请求方法","example":"POST"},"requestPath":{"type":"string","description":"请求路径","example":"/admin/users/create"},"ip":{"type":"string","description":"请求来源IP","example":"192.168.1.100"},"success":{"type":"boolean","description":"是否操作成功","example":true},"errorCode":{"type":"string","description":"错误码","example":"USER_NOT_FOUND"},"errorMessage":{"type":"string","description":"错误信息","example":"用户不存在"},"durationMs":{"type":"number","description":"请求耗时（毫秒）","example":150},"createdAt":{"type":"string","description":"操作时间（ISO 8601 格式）","example":"2025-01-01T12:00:00.000Z"},"userAgent":{"type":"string","description":"用户代理/设备信息","example":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36"},"requestBody":{"type":"object","description":"请求参数快照（已脱敏）","example":{"username":"john_doe","email":"***@example.com"}},"responseBody":{"type":"object","description":"响应结果快照（可选）","example":{"id":1,"success":true}},"changes":{"type":"object","description":"字段变更明细","example":{"nickname":{"old":"张三","new":"张三丰"}}},"traceId":{"type":"string","description":"链路追踪ID","example":"trace-123456"}},"required":["id","adminId","adminUid","adminUsername","module","action","description","targetType","httpMethod","requestPath","ip","success","durationMs","createdAt"]},"OperationLogStatsVO":{"type":"object","properties":{"todayCount":{"type":"number","description":"今日操作总数","example":100},"todaySuccessCount":{"type":"number","description":"今日成功操作数","example":95},"todayFailCount":{"type":"number","description":"今日失败操作数","example":5},"weekCount":{"type":"number","description":"本周操作总数","example":700},"monthCount":{"type":"number","description":"本月操作总数","example":3000},"moduleStats":{"description":"各模块操作统计","example":[{"module":"用户管理","count":50},{"module":"角色管理","count":30}],"type":"array","items":{"type":"string"}},"actionStats":{"description":"各动作操作统计","example":[{"action":"CREATE","count":20},{"action":"UPDATE","count":50}],"type":"array","items":{"type":"string"}}},"required":["todayCount","todaySuccessCount","todayFailCount","weekCount","monthCount","moduleStats","actionStats"]},"OperationLogTimelineVO":{"type":"object","properties":{"time":{"type":"string","description":"时间点（ISO 8601 格式）","example":"2025-01-01T00:00:00.000Z"},"count":{"type":"number","description":"操作数量","example":10},"successCount":{"type":"number","description":"成功数量","example":9},"failCount":{"type":"number","description":"失败数量","example":1}},"required":["time","count","successCount","failCount"]},"CreateArticleDto":{"type":"object","properties":{"title":{"type":"string","description":"文章标题","example":"系统更新公告","maxLength":255},"subTitle":{"type":"string","description":"子标题","example":"2025年1月重大更新","maxLength":255},"summary":{"type":"string","description":"摘要","example":"本次更新包含多项功能改进...","maxLength":512},"content":{"type":"string","description":"文章正文内容","example":"# 更新内容\n\n## 新功能\n..."},"contentFormat":{"type":"string","description":"内容格式","enum":["markdown","html","richtext"],"default":"markdown"},"coverUrl":{"type":"string","description":"封面图 URL","example":"https://example.com/cover.jpg","maxLength":512},"categoryId":{"type":"number","description":"分类 ID","example":1},"categoryName":{"type":"string","description":"分类名称（冗余）","example":"公告","maxLength":64},"tags":{"description":"标签列表","example":["公告","更新日志"],"maxItems":10,"type":"array","items":{"type":"string"}},"status":{"type":"string","description":"文章状态","enum":["draft","published","offline"],"default":"draft"},"isTop":{"type":"boolean","description":"是否置顶","default":false},"isFeatured":{"type":"boolean","description":"是否推荐","default":false},"sortOrder":{"type":"number","description":"排序权重（越大越靠前）","example":0,"minimum":0},"seoTitle":{"type":"string","description":"SEO 标题","maxLength":255},"seoKeywords":{"type":"string","description":"SEO 关键词","maxLength":255},"seoDescription":{"type":"string","description":"SEO 描述","maxLength":512}},"required":["title","content"]},"ArticleDetailVO":{"type":"object","properties":{"id":{"type":"number","description":"文章 ID","example":1},"uid":{"type":"string","description":"文章 UID","example":"art_abc123"},"title":{"type":"string","description":"标题","example":"系统更新公告"},"subTitle":{"type":"string","description":"子标题","example":"2025年1月更新"},"summary":{"type":"string","description":"摘要","example":"本次更新包含..."},"coverUrl":{"type":"string","description":"封面图 URL"},"categoryId":{"type":"number","description":"分类 ID"},"categoryName":{"type":"string","description":"分类名称","example":"公告"},"tags":{"description":"标签列表","example":["公告","更新"],"type":"array","items":{"type":"string"}},"status":{"type":"string","description":"状态","enum":["draft","published","offline"],"example":"published"},"isTop":{"type":"boolean","description":"是否置顶","example":false},"isFeatured":{"type":"boolean","description":"是否推荐","example":false},"sortOrder":{"type":"number","description":"排序权重","example":0},"viewCount":{"type":"number","description":"阅读量","example":100},"likeCount":{"type":"number","description":"点赞数","example":10},"createdBy":{"type":"number","description":"创建人 ID"},"createdByUsername":{"type":"string","description":"创建人用户名","example":"admin"},"publishedAt":{"type":"string","description":"发布时间（ISO 8601）"},"createdAt":{"type":"string","description":"创建时间（ISO 8601）"},"updatedAt":{"type":"string","description":"更新时间（ISO 8601）"},"content":{"type":"string","description":"文章正文内容"},"contentFormat":{"type":"string","description":"内容格式","enum":["markdown","html","richtext"],"example":"markdown"},"seoTitle":{"type":"string","description":"SEO 标题"},"seoKeywords":{"type":"string","description":"SEO 关键词"},"seoDescription":{"type":"string","description":"SEO 描述"},"createdByUid":{"type":"string","description":"创建人 UID","example":"adm_123"},"updatedBy":{"type":"number","description":"最后修改人 ID"},"updatedByUid":{"type":"string","description":"最后修改人 UID"},"updatedByUsername":{"type":"string","description":"最后修改人用户名"},"isDeleted":{"type":"boolean","description":"是否已删除","example":false}},"required":["id","uid","title","summary","categoryName","status","isTop","isFeatured","sortOrder","viewCount","likeCount","createdByUsername","createdAt","updatedAt","content","contentFormat","seoTitle","seoKeywords","seoDescription","createdByUid","updatedByUid","updatedByUsername","isDeleted"]},"ArticleListItemVO":{"type":"object","properties":{"id":{"type":"number","description":"文章 ID","example":1},"uid":{"type":"string","description":"文章 UID","example":"art_abc123"},"title":{"type":"string","description":"标题","example":"系统更新公告"},"subTitle":{"type":"string","description":"子标题","example":"2025年1月更新"},"summary":{"type":"string","description":"摘要","example":"本次更新包含..."},"coverUrl":{"type":"string","description":"封面图 URL"},"categoryId":{"type":"number","description":"分类 ID"},"categoryName":{"type":"string","description":"分类名称","example":"公告"},"tags":{"description":"标签列表","example":["公告","更新"],"type":"array","items":{"type":"string"}},"status":{"type":"string","description":"状态","enum":["draft","published","offline"],"example":"published"},"isTop":{"type":"boolean","description":"是否置顶","example":false},"isFeatured":{"type":"boolean","description":"是否推荐","example":false},"sortOrder":{"type":"number","description":"排序权重","example":0},"viewCount":{"type":"number","description":"阅读量","example":100},"likeCount":{"type":"number","description":"点赞数","example":10},"createdBy":{"type":"number","description":"创建人 ID"},"createdByUsername":{"type":"string","description":"创建人用户名","example":"admin"},"publishedAt":{"type":"string","description":"发布时间（ISO 8601）"},"createdAt":{"type":"string","description":"创建时间（ISO 8601）"},"updatedAt":{"type":"string","description":"更新时间（ISO 8601）"}},"required":["id","uid","title","summary","categoryName","status","isTop","isFeatured","sortOrder","viewCount","likeCount","createdByUsername","createdAt","updatedAt"]},"ArticleListVO":{"type":"object","properties":{"total":{"type":"number","description":"总记录数","example":100},"items":{"description":"文章列表","type":"array","items":{"$ref":"#/components/schemas/ArticleListItemVO"}},"page":{"type":"number","description":"当前页码","example":1},"pageSize":{"type":"number","description":"每页条数","example":20},"totalPages":{"type":"number","description":"总页数","example":5}},"required":["total","items","page","pageSize","totalPages"]},"ArticleStatsVO":{"type":"object","properties":{"totalCount":{"type":"number","description":"文章总数","example":100},"draftCount":{"type":"number","description":"草稿数","example":20},"publishedCount":{"type":"number","description":"已发布数","example":70},"offlineCount":{"type":"number","description":"已下线数","example":10},"topCount":{"type":"number","description":"置顶文章数","example":5},"featuredCount":{"type":"number","description":"推荐文章数","example":10},"totalViewCount":{"type":"number","description":"总阅读量","example":10000},"totalLikeCount":{"type":"number","description":"总点赞数","example":500},"categoryStats":{"description":"各分类文章统计","example":[{"categoryId":1,"categoryName":"公告","count":30},{"categoryId":2,"categoryName":"教程","count":20}],"type":"array","items":{"type":"string"}}},"required":["totalCount","draftCount","publishedCount","offlineCount","topCount","featuredCount","totalViewCount","totalLikeCount","categoryStats"]},"ConfigOptionDto":{"type":"object","properties":{"label":{"type":"string","description":"选项标签"},"value":{"type":"string","description":"选项值"}},"required":["label","value"]},"CreateModuleConfigDto":{"type":"object","properties":{"moduleCode":{"type":"string","description":"模块编码","example":"article","maxLength":64},"moduleName":{"type":"string","description":"模块名称","example":"文章管理","maxLength":64},"itemKey":{"type":"string","description":"配置项 key","example":"max_article_count","maxLength":64},"itemName":{"type":"string","description":"配置项名称","example":"最大文章数量","maxLength":128},"itemType":{"type":"string","description":"配置项类型","enum":["switch","number","text","json","select","multiselect"],"default":"text"},"value":{"type":"string","description":"配置值","example":"100"},"defaultValue":{"type":"string","description":"默认值","example":"50"},"options":{"description":"可选值列表（用于 select/multiselect 类型）","type":"array","items":{"$ref":"#/components/schemas/ConfigOptionDto"}},"status":{"type":"string","description":"状态","enum":["enabled","disabled"],"default":"enabled"},"description":{"type":"string","description":"配置项说明","maxLength":512},"remark":{"type":"string","description":"配置项备注（内部使用）","maxLength":255},"sortOrder":{"type":"number","description":"排序权重（越大越靠前）","example":0,"minimum":0},"isSystem":{"type":"boolean","description":"是否系统内置","default":false}},"required":["moduleCode","itemKey","value"]},"CreateSurveyDto":{"type":"object","properties":{"title":{"type":"object","description":"问卷标题（多语言 JSON）","example":{"zhCN":"用户满意度调查","enUS":"User Satisfaction Survey"}},"description":{"type":"object","description":"问卷描述（多语言 JSON）","example":{"zhCN":"请填写您的真实感受","enUS":"Please share your experience"}},"topics":{"type":"object","description":"问卷结构（题目列表配置 JSON schema）"},"endMessage":{"type":"object","description":"答卷结束提示语（多语言 JSON）","example":{"zhCN":"感谢您的参与！","enUS":"Thank you for your participation!"}},"languagesList":{"description":"启用的多语言列表","example":["zhCN","enUS"],"type":"array","items":{"type":"string"}},"themeColor":{"type":"string","description":"主题主色","example":"#409EFF"},"status":{"type":"string","description":"状态","enum":["draft","active","closed"],"default":"draft"},"loginRequired":{"type":"boolean","description":"是否需要登录才可答题","default":false},"answerLimitDate":{"type":"boolean","description":"是否限制答题时间","default":false},"showQuestionIndex":{"type":"boolean","description":"是否显示题目编号","default":true},"startTime":{"type":"string","description":"问卷开始时间","example":"2024-01-01T00:00:00.000Z"},"endTime":{"type":"string","description":"问卷截止时间","example":"2024-12-31T23:59:59.000Z"},"datetimeRange":{"description":"时间范围 [start, end]","type":"array","items":{"type":"string"}},"maxSubmitTimesPerUser":{"type":"number","description":"每个用户最多可提交次数（0 表示不限制）","default":0},"requireGameBinding":{"type":"boolean","description":"是否要求填写前绑定游戏账号","default":false},"sortOrder":{"type":"number","description":"排序权重（数字越大越靠前）","default":0},"categoryId":{"type":"number","description":"分类 ID（关联 admin_categories）","example":1},"categoryName":{"type":"string","description":"分类名称（冗余，便于展示）","example":"用户调研","maxLength":64}},"required":["title"]},"CreateCategoryDto":{"type":"object","properties":{"moduleCode":{"type":"string","description":"模块编码","example":"article","maxLength":64},"name":{"type":"string","description":"分类名称","example":"技术文章","maxLength":64},"slug":{"type":"string","description":"URL 标识（同一模块内唯一）","example":"tech-articles","maxLength":128},"description":{"type":"string","description":"分类描述","maxLength":255},"icon":{"type":"string","description":"图标","maxLength":128},"coverUrl":{"type":"string","description":"封面图 URL","maxLength":512},"parentId":{"type":"number","description":"父分类 ID","example":1},"sortOrder":{"type":"number","description":"排序权重（越大越靠前）","example":0,"minimum":0},"status":{"type":"string","description":"状态","enum":["enabled","disabled"],"default":"enabled"}},"required":["moduleCode","name","slug"]},"UpdateCategoryDto":{"type":"object","properties":{"name":{"type":"string","description":"分类名称","maxLength":64},"slug":{"type":"string","description":"URL 标识","maxLength":128},"description":{"type":"string","description":"分类描述","maxLength":255},"icon":{"type":"string","description":"图标","maxLength":128},"coverUrl":{"type":"string","description":"封面图 URL","maxLength":512},"parentId":{"type":"number","description":"父分类 ID"},"sortOrder":{"type":"number","description":"排序权重","minimum":0},"status":{"type":"string","description":"状态","enum":["enabled","disabled"]}}},"CreateSurveyResponseDto":{"type":"object","properties":{"surveyUid":{"type":"string","description":"问卷 UID","example":"srv_123456789012"},"answers":{"type":"object","description":"问卷答案（JSON 对象，key 为题目 ID，value 为答案）","example":{"q1":"A","q2":["B","C"],"q3":"这是我的回答"}},"durationSeconds":{"type":"number","description":"填写时长（秒）","example":120,"minimum":0},"locale":{"type":"string","description":"提交者所选语言（如 zhCN, enUS）","example":"zhCN","maxLength":10},"surveyLanguage":{"type":"string","description":"提交时使用的问卷语言","example":"zhCN","maxLength":10},"referrer":{"type":"string","description":"来源 Referrer","maxLength":512},"nickname":{"type":"string","description":"用户昵称（自填）","example":"Player123","maxLength":50},"guid":{"type":"string","description":"用户 KID/GUID（游戏账号标识）","example":"guid_abc123","maxLength":64},"gamelink":{"type":"object","description":"用户游戏链接信息","example":{"platform":"steam","region":"AS","uid":"76561198012345678"}},"email":{"type":"string","description":"用户邮箱（自填）","example":"user@example.com"},"timeZone":{"type":"string","description":"提交者时区","example":"Asia/Shanghai","maxLength":40}},"required":["surveyUid","answers"]},"SubmitResultVO":{"type":"object","properties":{"success":{"type":"boolean","description":"是否成功","example":true},"responseUid":{"type":"string","description":"响应 UID","example":"rsp_123456789012"},"message":{"type":"string","description":"消息"}},"required":["success","responseUid"]},"SurveyResponseListItemVO":{"type":"object","properties":{"id":{"type":"number","description":"响应 ID","example":1},"uid":{"type":"string","description":"响应 UID","example":"rsp_123456789012"},"surveyUid":{"type":"string","description":"问卷 UID","example":"srv_123456789012"},"status":{"type":"string","description":"响应状态","enum":["submitted","reviewing","approved","rejected"]},"isEffective":{"type":"boolean","description":"是否有效","example":true},"durationSeconds":{"type":"number","description":"填写时长（秒）"},"locale":{"type":"string","description":"提交语言"},"createdAt":{"type":"string","description":"提交时间（ISO 8601）"}},"required":["id","uid","surveyUid","status","isEffective","createdAt"]},"SurveyResponseListVO":{"type":"object","properties":{"total":{"type":"number","description":"总记录数","example":100},"items":{"description":"响应列表","type":"array","items":{"$ref":"#/components/schemas/SurveyResponseListItemVO"}},"page":{"type":"number","description":"当前页码","example":1},"pageSize":{"type":"number","description":"每页条数","example":20},"totalPages":{"type":"number","description":"总页数","example":5}},"required":["total","items","page","pageSize","totalPages"]},"SurveyResponseDetailVO":{"type":"object","properties":{"id":{"type":"number","description":"响应 ID","example":1},"uid":{"type":"string","description":"响应 UID","example":"rsp_123456789012"},"surveyUid":{"type":"string","description":"问卷 UID","example":"srv_123456789012"},"status":{"type":"string","description":"响应状态","enum":["submitted","reviewing","approved","rejected"]},"isEffective":{"type":"boolean","description":"是否有效","example":true},"durationSeconds":{"type":"number","description":"填写时长（秒）"},"locale":{"type":"string","description":"提交语言"},"createdAt":{"type":"string","description":"提交时间（ISO 8601）"},"answers":{"type":"object","description":"问卷答案"},"surveyLanguage":{"type":"string","description":"问卷语言"},"updatedAt":{"type":"string","description":"更新时间（ISO 8601）"}},"required":["id","uid","surveyUid","status","isEffective","createdAt","answers","updatedAt"]},"UserSurveyStatusVO":{"type":"object","properties":{"surveyUid":{"type":"string","description":"问卷 UID"},"hasSubmitted":{"type":"boolean","description":"是否已提交","example":false},"submitCount":{"type":"number","description":"已提交次数"},"maxSubmitTimes":{"type":"number","description":"最大可提交次数（0 表示不限）"},"canSubmit":{"type":"boolean","description":"是否可以继续提交","example":true},"lastResponseUid":{"type":"string","description":"最后一次提交的响应 UID"},"lastSubmitTime":{"type":"string","description":"最后提交时间"}},"required":["surveyUid","hasSubmitted","canSubmit"]},"UpdateSurveyResponseDto":{"type":"object","properties":{"answers":{"type":"object","description":"问卷答案（JSON 对象）"},"nickname":{"type":"string","description":"用户昵称","maxLength":50},"guid":{"type":"string","description":"用户 KID/GUID","maxLength":64},"gamelink":{"type":"object","description":"游戏链接信息"},"email":{"type":"string","description":"用户邮箱"}}}}}};
      
      window.ui = SwaggerUIBundle({
        spec: spec,
        dom_id: '#swagger-ui',
        deepLinking: true,
        presets: [
          SwaggerUIBundle.presets.apis,
          SwaggerUIStandalonePreset
        ],
        plugins: [
          SwaggerUIBundle.plugins.DownloadUrl
        ],
        layout: "StandaloneLayout",
        docExpansion: 'list',
        filter: true,
        showExtensions: true,
        showCommonExtensions: true,
        tryItOutEnabled: false, // 禁用 Try it out（外部文档不需要）
        persistAuthorization: true,
        defaultModelsExpandDepth: 1,
        defaultModelExpandDepth: 2,
      });
    };
  </script>
</body>
</html>